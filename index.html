<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì¹´ë¥´ë‹ˆìŠ¤ ì—°ëŒ€ê¸°</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">

<style>
@font-face {
  font-family: 'Independent';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.1/Dokrip.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'LeeSunShin';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/YiSunShinRegular.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

:root{
  --bg:#070708;
  --text:#ececec;
  --line:rgba(255,255,255,0.14);
  --blood:#d14a4a;

  --paper: rgba(12,12,14,0.86);
  --paper2: rgba(255,255,255,0.035);
  --gold: rgba(210,190,120,0.55);
}

body{
  margin:0;
  background: var(--bg);
  color: var(--text);
  font-family: "IM Fell English", Georgia, "Times New Roman", serif;
  overflow-x:hidden;
}

/* ë°°ê²½ ë¹„ë„¤íŒ… */
.vignette{
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(1200px 900px at 50% 55%, transparent 45%, rgba(0,0,0,0.82) 100%);
  z-index: 1;
}

/* ìƒë‹¨ ë©”ë‰´ë°”: ì¸íŠ¸ë¡œì—ì„œëŠ” ìˆ¨ê¹€ */
.topNav{
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 20;

  display: flex;
  justify-content: center;
  gap: 18px;

  padding: 14px 16px;
  background: rgba(7,7,8,0.75);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid var(--line);

  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
  transition: opacity 260ms ease, transform 260ms ease;
}

.topNav.show{
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.topNav a{
  font-family: "Cinzel", serif;
  color: rgba(236,236,236,0.78);
  text-decoration: none;
  letter-spacing: 2px;
  font-size: 12px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  transition: opacity 160ms ease, border-color 160ms ease, transform 160ms ease, color 160ms ease, background 160ms ease;
}

.topNav a:hover{
  opacity: 1;
  border-color: rgba(255,255,255,0.18);
  transform: translateY(-1px);
}

.topNav a.active{
  color: rgba(236,236,236,1);
  border-color: rgba(210,190,120,0.35);
  background: rgba(210,190,120,0.08);
}

/* ë¬´ëŒ€ */
.stage{
  position: relative;
  z-index: 3;
  min-height: 100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 84px 24px 24px;
}

/* ì¸íŠ¸ë¡œ */
#intro{
  width:100%;
  max-width:600px;
  text-align:center;
  border:1px solid var(--line);
  border-radius:18px;
  padding:40px 20px;
  background:rgba(255,255,255,0.04);
  transition: opacity 600ms ease;
}

#intro h2{
  font-family: "Cinzel", serif;
  letter-spacing: 2px;
  font-weight: 600;
}

.press{
  margin-top:20px;
  display:inline-block;
  padding:10px 16px;
  border:1px solid rgba(255,255,255,0.3);
  border-radius:10px;
  letter-spacing:3px;
  cursor:pointer;
  font-family: "Cinzel", serif;
  font-size: 12px;
  opacity: 0.9;
}

/* ë³¸ë¬¸ íŒ¨ë„ */
#mainContent{
  text-align: center;
  display:none;
  width:100%;
  max-width:760px;
  border-radius:18px;
  padding:34px 26px;

  background:
    radial-gradient(800px 500px at 50% 0%, rgba(255,255,255,0.05), transparent 55%),
    linear-gradient(180deg, var(--paper2), transparent 35%),
    var(--paper);

  border: 1px solid rgba(255,255,255,0.12);
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.6) inset,
    0 18px 50px rgba(0,0,0,0.55);

  opacity:0;
  transform:translateY(10px);
}

#mainContent.show{
  animation:appear 800ms ease forwards;
}

@keyframes appear{
  to{opacity:1; transform:translateY(0);}
}

h1{
  font-family: "Cinzel", serif;
  text-align:center;
  margin: 6px 0 16px;
  letter-spacing: 4px;
  font-weight: 700;
  font-size: 22px;
}

#page-myth > h1{
  font-family: 'Independent', serif;
  font-weight: 400;
  letter-spacing: 1px; 
}

#page-myth .myth{
  font-family: 'LeeSunShin', "IM Fell English", Georgia, "Times New Roman", serif;
  font-weight: 300;
}

#page-myth .myth p,
#page-myth .myth strong,
#page-myth .myth .blood{
  font-family: inherit;
  font-weight: inherit;
}

#mainContent h1::after{
  content:"";
  display:block;
  width: 72%;
  height: 1px;
  margin: 14px auto 0;
  background: linear-gradient(90deg, transparent, rgba(210,190,120,0.45), transparent);
}

.page{
  display:none;
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 220ms ease, transform 220ms ease;
}

.page.active{
  display:block;
  opacity: 1;
  transform: translateY(0);
}

/* ì°½ì„¸ì‹ í™” ë¬¸ë‹¨ */
.myth p{
  line-height: 1.75;
  margin: 0 0 8px;
  font-size: 16px;
  color: rgba(236,236,236,0.92);
}

.blood{
  color: var(--blood);
  font-weight: 400; 
  letter-spacing:1px;
  text-shadow: 0 0 10px rgba(122,17,17,0.25);
}

  #page-myth .blood{
  font-size: 1.08em; 
  font-weight: 600;
}

.lead{
  margin: 16px auto 18px;
  max-width: 640px;
  line-height: 1.65;
  font-size: 16px;
  color: rgba(236,236,236,0.92);
  opacity: 0.95;
}

/* ê°€ë¬¸ ì¹´ë“œ */
.familyGrid{
  margin-top: 18px;
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
  text-align: left;
}

@media (min-width: 720px){
  .familyGrid{ grid-template-columns: 1fr 1fr; }
}

.familyCard{
  border: 1px solid rgba(210,190,120,0.18);
  border-radius: 16px;
  padding: 16px 16px 14px;
  background: rgba(255,255,255,0.03);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.45) inset;
}

.familyCard h2{
  margin: 0 0 10px;
  font-family: "Cinzel", serif;
  letter-spacing: 2px;
  font-size: 15px;
  font-weight: 700;
  color: rgba(236,236,236,0.95);
  text-align: center;
}

.familyCard p{
  margin: 0 0 8px;
  line-height: 1.6;
  font-size: 15px;
  color: rgba(236,236,236,0.90);
}

.tagRow{
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.tag{
  font-family: "Cinzel", serif;
  font-size: 11px;
  letter-spacing: 1px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.03);
  color: rgba(236,236,236,0.85);
}

.fadeOut{ opacity:0; }
</style>


  
</head>

<body>

<nav class="topNav" id="topNav">
  <a href="#" data-page="myth" class="active">ì°½ì„¸ ì‹ í™”</a>
  <a href="#" data-page="families">ê°€ë¬¸</a>
  <a href="#" data-page="regions">ì§€ì—­</a>
  <a href="#" data-page="map">ì „ì²´ ì§€ë„</a>
</nav>

<div class="vignette"></div>

<div class="stage">

  <section id="intro">
    <h2>íƒœì´ˆì˜ ì‹ ì´ ë¨¹íŒ ë°¤</h2>
    <div class="press" id="pressBtn">PRESS ENTER</div>
  </section>

  <section id="mainContent">
    <!-- âœ… 1) ì°½ì„¸ ì‹ í™” -->
    <div class="page active" id="page-myth">
      <h1>ì°½ì„¸ ì‹ í™”</h1>
      <div class="myth">
        <p>íƒœì´ˆì— í•˜ë‚˜ì˜ ì‹ ì´ ì„¸ê³„ë¥¼ ì°½ì¡°í•˜ê³ , ê·¸ ìœ„ì— êµ°ë¦¼í–ˆë‹¤.</p>
        <p>ì‹ ì€ ë™ì‹œì— ì—¬ëŸ¬ í”¼ì¡°ë¬¼ì„ ë§Œë“¤ì–´ ìì‹ ì´ ë§Œë“  ë•…ì„ ëŒë³´ê²Œ í–ˆë‹¤.</p>

        <p>ê·¸ëŸ¬ë‚˜ ì‹œê°„ì´ íë¥´ë©° í”¼ì¡°ë¬¼ë“¤ ì‚¬ì´ì—ëŠ” ë¶ˆë§Œì´ ì‹¹íŠ¸ê¸° ì‹œì‘í–ˆë‹¤.</p>
        <p>ê·¸ë¦¬ê³  ì–´ëŠ ë‚ , í•œ í”¼ì¡°ë¬¼ì˜ ì„ ë™ì— ì˜í•´ ê·¸ë“¤ì€ ì ë“  ì‹ ì„ ë®ì³¤ë‹¤.</p>
        <p>í”¼ì¡°ë¬¼ë“¤ì€ ì‹ ì˜ ìœ¡ì‹ ì„ ë‹¤ì„¯ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ„ì–´, ê·¸ê²ƒì„ ë¨¹ì—ˆë‹¤.</p>

        <p><strong class="blood">ëˆˆ, í˜€, ì‹¬ì¥, ë¼ˆ, ê·¸ë¦¬ê³  í”¼.</strong></p>

        <p>ì‹ ì„ ì§‘ì–´ì‚¼í‚¨ ìˆœê°„, ê·¸ë“¤ì€ ì ˆëŒ€ì ì¸ ê¶ŒëŠ¥ì„ í•˜ë‚˜ì”© ê³„ìŠ¹í–ˆë‹¤.</p>
        <p>ëˆˆì„ ë¨¹ì€ ìëŠ” ë¯¸ë˜ë¥¼ ê¿°ëš«ì–´ë³´ëŠ” ì˜ˆì§€ë ¥ì„ ì–»ì—ˆê³ ,</p>
        <p>í˜€ë¥¼ ë¨¹ì€ ìëŠ” ì„¸ê³„ë¥¼ êµ´ë³µì‹œí‚¤ëŠ” ì–¸ë ¹ì„ ì†ì— ë„£ì—ˆë‹¤.</p>
        <p>ì‹¬ì¥ì„ ë¨¹ì€ ìëŠ” ì£½ì§€ ì•ŠëŠ” ìƒëª…ì„,</p>
        <p>ë¼ˆë¥¼ ë¨¹ì€ ìëŠ” íŒŒê´´ë˜ì§€ ì•ŠëŠ” ìœ¡ì‹ ì„,</p>
        <p>í”¼ë¥¼ ë§ˆì‹  ìëŠ” ì ˆëŒ€ì ì¸ í˜ˆë§¹ì˜ ê¶ŒëŠ¥ì„ ì–»ì—ˆë‹¤.</p>

        <p>í•œë‚± í”¼ì¡°ë¬¼ì— ë¶ˆê³¼í•˜ë˜ ê·¸ë“¤ì€ ì´ì œ ì‹ ì˜ í˜ì„ í–‰ì‚¬í•˜ëŠ” ì¡´ì¬ê°€ ë˜ì—ˆê³ ,</p>
        <p>ìŠ¤ìŠ¤ë¡œë¥¼ â€˜ì‹ ì‹ì(ç¥é£Ÿè€…)â€™ë¼ ì¹­í•˜ë©°</p>
        <p>ì‹ ì´ ì°½ì¡°í•œ ì„¸ê³„ë¥¼ ë‚˜ëˆ„ì–´ í†µì¹˜í•˜ê¸° ì‹œì‘í–ˆë‹¤.</p>

        <p>ê·¸ëŸ¬ë‚˜ ê·¸ë“¤ì€ ë¯¸ì²˜ ê¹¨ë‹«ì§€ ëª»í–ˆë‹¤.</p>
        <p>ì‹ ì´ ë¨¹íŒ ê·¸ ìë¦¬ì— ë‚¨ì•„ ìˆë˜ ê²ƒ,</p>
        <p>â€˜ê·¸ë¦¼ìâ€™ì˜ ì¡´ì¬ë¥¼.</p>

        <p>ê·¸ ê·¸ë¦¼ìë¥¼ í›”ì³ ë‹¬ì•„ë‚œ ë˜ ë‹¤ë¥¸ í”¼ì¡°ë¬¼ì´ ìˆì—ˆë‹¤.</p>
        <p>ê·¸ëŠ” ì‹ ì‹ìë“¤ì˜ ì§€ë°°ê°€ ë¯¸ì¹˜ì§€ ì•ŠëŠ” ì„¸ê³„ì˜ ê²½ê³„ë¡œ ìˆ¨ì–´ë“¤ì–´,</p>
        <p>ìŠíŒ ì‹ ì˜ ë¶€í™œì„ ì¤€ë¹„í•˜ê¸° ì‹œì‘í–ˆë‹¤.</p>
      </div>
    </div>

    <!-- âœ… 2) ê°€ë¬¸ -->
    <div class="page" id="page-families">
      <h1>ê°€ë¬¸</h1>
      <p class="lead">
        ì‹ ì˜ ìœ¡ì‹ ì„ ë‚˜ëˆ  ì‚¼í‚¨ ë‹¤ì„¯ í˜ˆí†µì€ ì„œë¡œ ë‹¤ë¥¸ ê¶ŒëŠ¥ê³¼ ê¸ˆê¸°ë¥¼ ë¬¼ë ¤ë°›ì•˜ë‹¤.
        ê° ê°€ë¬¸ì€ ì˜í† ì˜ ê¸°í›„ì™€ ì§ˆì„œì— ë§ì¶° ìŠ¤ìŠ¤ë¡œë¥¼ ë‹¤ë“¬ì—ˆê³ ,
        ê·¸ ê³¼ì •ì—ì„œ ê°™ì€ ì´ë¦„ì˜ í˜ì€ ì„œë¡œ ë‹¤ë¥¸ í˜•íƒœë¡œ ë³€ì§ˆë˜ì—ˆë‹¤.
      </p>

      <div class="familyGrid">
        <article class="familyCard">
          <h2>ëˆˆì˜ ì¼ì¡±</h2>
          <p>ì˜ˆì§€ì™€ ê³„ì‹œë¥¼ ë‹¤ë£¬ë‹¤. íƒœì–´ë‚˜ëŠ” ìëŠ” ëª¨ë‘ <span class="blood">ì‹¤ëª…</span>ìœ¼ë¡œ ì‹œì‘í•œë‹¤.</p>
          <p>ëŒ€ì‹  â€˜ë¯¸ë˜ë¥¼ ë³´ëŠ” ëˆˆâ€™ì€ í˜ˆí†µ ì†ì— ë‚¨ì•„, ì„ íƒê³¼ ëŒ€ê°€ë¥¼ ìš”êµ¬í•œë‹¤.</p>
          <div class="tagRow">
            <span class="tag">ê¶ŒëŠ¥: ì˜ˆì§€</span>
            <span class="tag">ê¸ˆê¸°: ì‹œì„ </span>
            <span class="tag">ì˜í† : ë¶ë¶€ ì‚°ë§¥</span>
          </div>
        </article>

        <article class="familyCard">
          <h2>í˜€ì˜ ì¼ì¡±</h2>
          <p>ë§ê³¼ ì„œì•½ì´ ê³§ ë²•ì´ ëœë‹¤. ì–¸ë ¹ì€ í˜„ì‹¤ì„ êµ¬ë¶€ë¦¬ì§€ë§Œ, ê±°ì§“ì€ í”¼ë¥¼ ë¶€ë¥¸ë‹¤.</p>
          <p>ê·¸ë“¤ì˜ ëª©ì†Œë¦¬ëŠ” ì¶•ë³µì´ì ë¬´ê¸°ë‹¤.</p>
          <div class="tagRow">
            <span class="tag">ê¶ŒëŠ¥: ì–¸ë ¹</span>
            <span class="tag">ê¸ˆê¸°: ê±°ì§“</span>
            <span class="tag">ì˜í† : ë‚¨ë¶€ í‰ì•¼</span>
          </div>
        </article>

        <article class="familyCard">
          <h2>ì‹¬ì¥ì˜ ì¼ì¡±</h2>
          <p>ì£½ì§€ ì•ŠëŠ” ìƒëª…ê³¼ íšŒë³µì„ ë‹¤ë£¬ë‹¤. í•˜ì§€ë§Œ ë¶ˆì‚¬ì—ëŠ” â€˜ëë‚˜ì§€ ì•ŠëŠ” ëŒ€ê°€â€™ê°€ ë”°ë¥¸ë‹¤.</p>
          <p>ê·¸ë“¤ì˜ í”¼ëŠ” ë§¥ë°•ì²˜ëŸ¼ ì§ˆì„œë¥¼ ê°•ìš”í•œë‹¤.</p>
          <div class="tagRow">
            <span class="tag">ê¶ŒëŠ¥: ë¶ˆì‚¬</span>
            <span class="tag">ê¸ˆê¸°: ì•ˆì‹</span>
            <span class="tag">ì˜í† : ì¤‘ì•™ ìš”ì¶©ì§€</span>
          </div>
        </article>

        <article class="familyCard">
          <h2>ë¼ˆì˜ ì¼ì¡±</h2>
          <p>íŒŒê´´ë˜ì§€ ì•ŠëŠ” ìœ¡ì‹ ì„ ì¢‡ëŠ”ë‹¤. ì „íˆ¬ì™€ ì‹œí—˜ì„ ì‹ ì•™ì²˜ëŸ¼ ì—¬ê¸´ë‹¤.</p>
          <p>ê°•ì¸í•¨ì€ ë¯¸ë•ì´ì§€ë§Œ, ì§€ë‚˜ì¹˜ë©´ ì¸ê°„ì„±ì„ ê¹ì•„ë‚¸ë‹¤.</p>
          <div class="tagRow">
            <span class="tag">ê¶ŒëŠ¥: ê°•ì²´</span>
            <span class="tag">ê¸ˆê¸°: ì—°ì•½</span>
            <span class="tag">ì˜í† : ë™ë¶€ ë¶ˆëª¨ì§€</span>
          </div>
        </article>

        <article class="familyCard">
          <h2>í”¼ì˜ ì¼ì¡±</h2>
          <p>í˜ˆë§¹ê³¼ ê·€ì†ì˜ í˜ì„ ë‹¤ë£¬ë‹¤. ë§¹ì„¸ëŠ” ìƒì¡´ì„ ë³´ì¥í•˜ì§€ë§Œ, ììœ ë¥¼ ê±°ë‘”ë‹¤.</p>
          <p>ê·¸ë“¤ì˜ ê³„ì•½ì€ ë‹¬ì½¤í•˜ê³  ì”í˜¹í•˜ë‹¤.</p>
          <div class="tagRow">
            <span class="tag">ê¶ŒëŠ¥: í˜ˆë§¹</span>
            <span class="tag">ê¸ˆê¸°: ë°°ë°˜</span>
            <span class="tag">ì˜í† : ì„œë¶€ ìŒì§€</span>
          </div>
        </article>
      </div>
    </div>

    <!-- âœ… 3) ì§€ì—­ (ìë¦¬ë§Œ) -->
    <div class="page" id="page-regions">
      <h1>ì§€ì—­</h1>
      <p class="lead">ì§€ì—­ ì¶”ê°€ ì˜ˆì •.</p>
    </div>

    <!-- âœ… 4) ì „ì²´ ì§€ë„ (ìë¦¬ë§Œ) -->
    <div class="page" id="page-map">
      <h1>ì „ì²´ ì§€ë„</h1>
      <p class="lead">ì§€ë„ ì´ë¯¸ì§€ ì¶”ê°€ ì˜ˆì •.</p>
    </div>

  </section>
</div>

<!-- ğŸµ BGM -->
<audio id="bgm" autoplay loop muted>
  <source src="bgm.mp3" type="audio/mpeg">
</audio>

<div id="audioControl">
  <button id="bgmToggle" aria-label="BGM Toggle">
    <svg id="playIcon" viewBox="0 0 24 24">
      <polygon points="8,5 19,12 8,19"></polygon>
    </svg>
    <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none;">
      <rect x="6" y="5" width="4" height="14"></rect>
      <rect x="14" y="5" width="4" height="14"></rect>
    </svg>
  </button>
  <input type="range" id="volumeSlider" min="0" max="100" value="50">
</div>

<style>
#audioControl{
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10;

  display: flex;
  align-items: center;
  gap: 14px;
}

#volumeSlider{
  width: 120px;
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
}

#volumeSlider::-webkit-slider-runnable-track{
  height: 2px;
  background: rgba(255,255,255,0.4);
  border-radius: 2px;
}

#volumeSlider::-moz-range-track{
  height: 2px;
  background: rgba(255,255,255,0.4);
  border-radius: 2px;
}

#volumeSlider::-webkit-slider-thumb{
  -webkit-appearance: none;
  width: 10px;
  height: 10px;
  background: white;
  border-radius: 50%;
  margin-top: -4px;
  transition: transform 0.2s ease;
}

#volumeSlider::-moz-range-thumb{
  width: 10px;
  height: 10px;
  background: white;
  border-radius: 50%;
  border: none;
  transition: transform 0.2s ease;
}

#volumeSlider:hover::-webkit-slider-thumb{ transform: scale(1.2); }
#volumeSlider:hover::-moz-range-thumb{ transform: scale(1.2); }

#bgmToggle{
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
}

#bgmToggle svg{
  width: 22px;
  height: 22px;
  fill: white;
  opacity: 0.6;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

#bgmToggle:hover svg{
  opacity: 1;
  transform: scale(1.1);
}
</style>

<script>
const intro = document.getElementById("intro");
const mainContent = document.getElementById("mainContent");
const pressBtn = document.getElementById("pressBtn");

const bgm = document.getElementById("bgm");
const volumeSlider = document.getElementById("volumeSlider");
const bgmToggle = document.getElementById("bgmToggle");

const playIcon = document.getElementById("playIcon");
const pauseIcon = document.getElementById("pauseIcon");

const topNav = document.getElementById("topNav");
const navLinks = topNav.querySelectorAll("a[data-page]");

let started = false;
let fadeTimer = null;

/* í˜ì´ì§€(ì„¹ì…˜) ì „í™˜ */
function showPage(key){
  const pages = document.querySelectorAll(".page");
  pages.forEach(p => p.classList.remove("active"));

  const target = document.getElementById("page-" + key);
  if (target) target.classList.add("active");

  navLinks.forEach(a => a.classList.toggle("active", a.dataset.page === key));
  window.scrollTo({ top: 0, behavior: "smooth" });
}

/* ì˜¤ë””ì˜¤ */
function getTargetVolume(){
  return volumeSlider.value / 100;
}

function updateBgmButton(){
  if(bgm.paused){
    playIcon.style.display = "block";
    pauseIcon.style.display = "none";
  } else {
    playIcon.style.display = "none";
    pauseIcon.style.display = "block";
  }
}

function fadeTo(target, duration = 600, onDone){
  if (fadeTimer) clearInterval(fadeTimer);

  const startVol = bgm.volume;
  const diff = target - startVol;
  const steps = Math.max(1, Math.floor(duration / 30));
  let currentStep = 0;

  fadeTimer = setInterval(()=>{
    currentStep++;
    const progress = currentStep / steps;
    bgm.volume = startVol + diff * progress;

    if (currentStep >= steps){
      clearInterval(fadeTimer);
      fadeTimer = null;
      bgm.volume = target;
      if (onDone) onDone();
    }
  }, 30);
}

/* ì‹œì‘ */
function startStory(){
  if(started) return;
  started = true;

  intro.classList.add("fadeOut");

  bgm.muted = false;
  bgm.volume = 0;

  bgm.play().then(()=>{
    fadeTo(getTargetVolume(), 800);
    updateBgmButton();
  }).catch(()=>{});

  setTimeout(()=>{
    intro.style.display="none";
    mainContent.style.display="block";
    mainContent.classList.add("show");
    topNav.classList.add("show");
  },500);
}

/* Enter */
document.addEventListener("keydown", e=>{
  if(e.key==="Enter") startStory();
});

/* í´ë¦­ */
if(pressBtn) pressBtn.addEventListener("click", startStory);
if(intro) intro.addEventListener("click", startStory);

/* ë©”ë‰´ í´ë¦­ */
navLinks.forEach(a=>{
  a.addEventListener("click", (e)=>{
    e.preventDefault();
    const key = a.dataset.page;
    if (!started){
      // ì¸íŠ¸ë¡œ ìƒíƒœì—ì„œ ë©”ë‰´ ëˆ„ë¥´ë©´ ì‹œì‘ë¶€í„° ì‹œí‚¤ê³  ì´ë™
      startStory();
      setTimeout(()=> showPage(key), 600);
      return;
    }
    showPage(key);
  });
});

/* ë³¼ë¥¨ */
volumeSlider.addEventListener("input", ()=>{
  if(!bgm.paused){
    fadeTo(getTargetVolume(), 200);
  }
});

/* í† ê¸€ */
bgmToggle.addEventListener("click", ()=>{
  if(!started){
    startStory();
    return;
  }

  if(bgm.paused){
    bgm.volume = 0;
    bgm.play().then(()=>{
      fadeTo(getTargetVolume(), 500);
      updateBgmButton();
    });
  } else {
    fadeTo(0, 400, ()=>{
      bgm.pause();
      updateBgmButton();
    });
  }
});

updateBgmButton();
</script>

</body>
</html>
