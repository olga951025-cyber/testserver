<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>카르니스 연대기</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">

<style>
/* =========================
   Noonnu fonts
   ========================= */
@font-face{
  font-family: 'Independent';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.1/Dokrip.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* ✅ 인트로 제목 폰트 */
@font-face{
  font-family: 'NostalgicPoliceVibe';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2601-6@1.0/Griun_PolSensibility-Rg.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
   font-family: 'KimJeongcheolMyoungjo';
   src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302_01@1.0/KimjungchulMyungjo-Regular.woff2') format('woff2');
   font-weight: 400;
   font-style: normal;
   font-display: swap;
}



:root{
  --bg:#070708;
  --text:#ececec;
  --line:rgba(255,255,255,0.14);
  --blood:#8e2b2b;

  --paper: rgba(12,12,14,0.86);
  --paper2: rgba(255,255,255,0.035);
  --gold: rgba(210,190,120,0.55);
}

body{
  margin:0;
  background: var(--bg);
  color: var(--text);
  font-family: "IM Fell English", Georgia, "Times New Roman", serif;
  overflow-x:hidden;
}

/* 배경 비네팅 */
.vignette{
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(1200px 900px at 50% 55%, transparent 45%, rgba(0,0,0,0.82) 100%);
  z-index: 1;
}

/* 상단 메뉴바: 인트로에서는 숨김 */
.topNav{
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 20;

  display: flex;
  justify-content: center;
  gap: 18px;

  padding: 14px 16px;
  background: rgba(7,7,8,0.75);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid var(--line);

  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
  transition: opacity 260ms ease, transform 260ms ease;
}

.topNav.show{
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.topNav a{
  font-family: "Cinzel", serif;
  color: rgba(236,236,236,0.78);
  text-decoration: none;
  letter-spacing: 2px;
  font-size: 12px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  transition: opacity 160ms ease, border-color 160ms ease, transform 160ms ease, color 160ms ease, background 160ms ease;
}

.topNav a:hover{
  opacity: 1;
  border-color: rgba(255,255,255,0.18);
  transform: translateY(-1px);
}

.topNav a.active{
  color: rgba(236,236,236,1);
  border-color: rgba(210,190,120,0.35);
  background: rgba(210,190,120,0.08);
}

/* 무대 */
.stage{
  position: relative;
  z-index: 3;
  min-height: 100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 84px 24px 24px;
}

/* 인트로 */
#intro{
  width:100%;
  max-width:600px;
  text-align:center;
  border:1px solid var(--line);
  border-radius:18px;
  padding:40px 20px;
  background:rgba(255,255,255,0.04);
  transition: opacity 600ms ease;
}

/* ✅ 인트로 제목: 폰트 + 붉은색 적용 */
#intro h2{
  font-family: 'NostalgicPoliceVibe', "Cinzel", serif;
  letter-spacing: 1px;
  font-weight: normal;
  color: var(--blood);
}

.press{
  margin-top:20px;
  display:inline-block;
  padding:10px 16px;
  border:1px solid rgba(255,255,255,0.3);
  border-radius:10px;
  letter-spacing:3px;
  cursor:pointer;
  font-family: "Cinzel", serif;
  font-size: 12px;
  opacity: 0.9;
}

/* 본문 패널 */
#mainContent{
  text-align: center;
  display:none;
  width:100%;
  max-width:760px;
  border-radius:18px;
  padding:34px 26px;

  background:
    radial-gradient(800px 500px at 50% 0%, rgba(255,255,255,0.05), transparent 55%),
    linear-gradient(180deg, var(--paper2), transparent 35%),
    var(--paper);

  border: 1px solid rgba(255,255,255,0.12);
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.6) inset,
    0 18px 50px rgba(0,0,0,0.55);

  opacity:0;
  transform:translateY(10px);
}

#mainContent.show{
  animation:appear 800ms ease forwards;
}

@keyframes appear{
  to{opacity:1; transform:translateY(0);}
}

h1{
  font-family: "Cinzel", serif;
  text-align:center;
  margin: 6px 0 16px;
  letter-spacing: 4px;
  font-weight: 700;
  font-size: 22px;
}

#page-myth > h1{
  font-family: 'Independent', serif;
  font-weight: 400;
  letter-spacing: 1px;
  font-size: 30px;
}

#page-myth .myth{
  font-family: 'KimJeongcheolMyoungjo', serif;
  font-weight: 400;
  line-height: 1.85;          /* 가독성 향상 */
  letter-spacing: -0.1px;     /* 명조계열 미세 보정 */
}

#page-myth .myth p,
#page-myth .myth strong,
#page-myth .myth .blood{
  font-family: inherit;
  font-weight: inherit;
}

#mainContent h1::after{
  content:"";
  display:block;
  width: 72%;
  height: 1px;
  margin: 14px auto 0;
  background: linear-gradient(90deg, transparent, rgba(210,190,120,0.45), transparent);
}

.page{
  display:none;
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 220ms ease, transform 220ms ease;
}

.page.active{
  display:block;
  opacity: 1;
  transform: translateY(0);
}

/* 창세신화 문단 */
.myth p{
  line-height: 1.75;
  margin: 0 0 8px;
  font-size: 16px;
  color: rgba(236,236,236,0.92);
}

.blood{
  color: var(--blood);
  font-weight: 400;
  letter-spacing:1px;
  text-shadow: 0 0 10px rgba(122,17,17,0.25);
}

#page-myth .blood{
  font-size: 1.13em;
  font-weight: 600;
}

/* ✅ 리드 문단 */
.lead{
  margin: 16px auto 18px;
  max-width: 640px;
  line-height: 1.65;
  font-size: 16px;
  color: rgba(236,236,236,0.92);
  opacity: 0.95;
  text-align: center;
}

/* =========================
   ✅ 가문 카드 (이미지 + 공용 모달)
   ========================= */
.familyGrid{
  margin-top: 18px;
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
  text-align: left;
}

@media (min-width: 720px){
  .familyGrid{ grid-template-columns: 1fr 1fr; }
}

.familyCard{
  width: 100%;
  border: 0;
  padding: 0;
  background: transparent;
  text-align: left;
  cursor: pointer;
  user-select: none;
}

.familyCard:focus-visible{
  outline: 2px solid rgba(210,190,120,0.55);
  outline-offset: 4px;
  border-radius: 18px;
}

.familyInner{
  position: relative;
  border: 1px solid rgba(210,190,120,0.18);
  border-radius: 16px;
  overflow: hidden;
  background: rgba(255,255,255,0.03);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.45) inset;
  transition: border-color 180ms ease, transform 180ms ease;
}

.familyCard:hover .familyInner{
  border-color: rgba(210,190,120,0.35);
  transform: translateY(-1px);
}

.familyThumb{
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  background: rgba(255,255,255,0.02);
  overflow: hidden;
}

.familyThumb img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;

  filter: grayscale(1) contrast(1.05) brightness(0.92);
  transform: scale(1.02);
  transition: filter 260ms ease, transform 260ms ease;
}

.familyCard:hover .familyThumb img,
.familyCard:focus-within .familyThumb img{
  filter: grayscale(0) contrast(1.02) brightness(1);
  transform: scale(1.06);
}

/* 클릭 힌트 */
.familyHint{
  position: absolute;
  top: 10px;
  left: 10px;
  z-index: 3;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(6px);
  font-family: "Cinzel", serif;
  font-size: 11px;
  letter-spacing: 1px;
  color: rgba(236,236,236,0.85);
}

.familyHintDot{
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(210,190,120,0.7);
  box-shadow: 0 0 10px rgba(210,190,120,0.25);
}

.familyFront{
  padding: 14px 16px 14px;
  text-align: center;
}

.familyFront h2{
  margin: 0 0 8px;
  font-family: "Cinzel", serif;
  letter-spacing: 2px;
  font-size: 15px;
  font-weight: 700;
  color: rgba(236,236,236,0.95);
}

.familyFront p{
  margin: 0 0 8px;
  line-height: 1.6;
  font-size: 15px;
  color: rgba(236,236,236,0.90);
}

.tagRow{
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.tag{
  font-family: "Cinzel", serif;
  font-size: 11px;
  letter-spacing: 1px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.03);
  color: rgba(236,236,236,0.85);
}

.familyCta{
  margin: 12px auto 0;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1px solid rgba(210,190,120,0.28);
  background: rgba(210,190,120,0.10);
  color: rgba(236,236,236,0.92);
  font-family: "Cinzel", serif;
  font-size: 12px;
  letter-spacing: 1px;
  cursor: pointer;
  transition: transform 160ms ease, border-color 160ms ease, background 160ms ease;
}
.familyCta:hover{
  transform: translateY(-1px);
  border-color: rgba(210,190,120,0.40);
  background: rgba(210,190,120,0.14);
}

/* 카드에선 숨김(모달 소스로만 사용) */
.familyBack{
  display: none !important;
}

/* =========================
   ✅ 지역 섹션: "요약만 카드" + 공용 모달
   ========================= */
.regionGrid{
  margin-top: 18px;
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
  text-align: left;
}

.regionFlip{ /* 유지(구조 변경 최소화) */ }

.regionCard{
  width: 100%;
  border: 0;
  padding: 0;
  background: transparent;
  text-align: left;
  cursor: pointer;
  user-select: none;
}

.regionCard:focus-visible{
  outline: 2px solid rgba(210,190,120,0.55);
  outline-offset: 4px;
  border-radius: 18px;
}

.regionInner{
  position: relative;
  border: 1px solid rgba(210,190,120,0.18);
  border-radius: 16px;
  overflow: hidden;
  background: rgba(255,255,255,0.03);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.45) inset;
  transition: border-color 180ms ease, transform 180ms ease;
}

.regionCard:hover .regionInner{
  border-color: rgba(210,190,120,0.35);
  transform: translateY(-1px);
}

.regionThumb{
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  background: rgba(255,255,255,0.02);
  overflow: hidden;
}

.regionThumb img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;

  filter: grayscale(1) contrast(1.05) brightness(0.92);
  transform: scale(1.02);
  transition: filter 260ms ease, transform 260ms ease;
}

.regionCard:hover .regionThumb img,
.regionCard:focus-within .regionThumb img{
  filter: grayscale(0) contrast(1.02) brightness(1);
  transform: scale(1.06);
}

/* 클릭 힌트 */
.hintBadge{
  position: absolute;
  top: 10px;
  left: 10px;
  z-index: 3;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(6px);
  font-family: "Cinzel", serif;
  font-size: 11px;
  letter-spacing: 1px;
  color: rgba(236,236,236,0.85);
}

.hintDot{
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(210,190,120,0.7);
  box-shadow: 0 0 10px rgba(210,190,120,0.25);
}

/* 카드 본문 */
.regionFront{
  padding-bottom: 14px;
}

.regionFront h2{
  margin: 14px 16px 6px;
  font-family: "Cinzel", serif;
  letter-spacing: 2px;
  font-size: 15px;
  font-weight: 700;
  color: rgba(236,236,236,0.95);
  text-align: center;
}

.regionFront p{
  margin: 0 16px 10px;
  line-height: 1.6;
  font-size: 15px;
  color: rgba(236,236,236,0.90);
  text-align: center;
}

/* 카드 요약 */
.regionMini{
  margin: 10px 14px 10px;
  padding: 12px 12px;
  border: 1px solid rgba(210,190,120,0.16);
  border-radius: 14px;
  background:
    radial-gradient(600px 260px at 50% 0%, rgba(255,255,255,0.045), transparent 55%),
    rgba(0,0,0,0.12);
  text-align: center;
}

.regionMini p{
  margin: 0;
  font-size: 14px;
  line-height: 1.65;
  color: rgba(236,236,236,0.92);
}

/* 카드 키워드 */
.regionMiniTags{
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
}

.regionMiniTag{
  font-family: "Cinzel", serif;
  font-size: 11px;
  letter-spacing: 1px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.03);
  color: rgba(236,236,236,0.85);
}

/* CTA 버튼 */
.regionCta{
  margin: 12px auto 0;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1px solid rgba(210,190,120,0.28);
  background: rgba(210,190,120,0.10);
  color: rgba(236,236,236,0.92);
  font-family: "Cinzel", serif;
  font-size: 12px;
  letter-spacing: 1px;
  cursor: pointer;
  transition: transform 160ms ease, border-color 160ms ease, background 160ms ease;
}

.regionCta:hover{
  transform: translateY(-1px);
  border-color: rgba(210,190,120,0.40);
  background: rgba(210,190,120,0.14);
}

/* ✅ 기존 "뒤면(전문)"은 카드에선 숨김 (모달 소스로만 사용) */
.regionBack{
  display: none !important;
}

/* =========================
   ✅ 공용 모달 (어두운 양피지 + 금색 라인)
   ========================= */
.modalOverlay{
  position: fixed;
  inset: 0;
  z-index: 999;

  display: none;
  align-items: center;
  justify-content: center;

  padding: 22px;
  background: rgba(0,0,0,0.62);
  backdrop-filter: blur(10px);
}

.modalOverlay.show{
  display: flex;
}

.modalDialog{
  width: min(920px, 100%);
  max-height: 86vh;          
  display: flex;              
  flex-direction: column;
  overflow: hidden;            

  border-radius: 18px;
  border: 1px solid rgba(210,190,120,0.20);
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.55) inset,
    0 22px 70px rgba(0,0,0,0.65);

  background:
    radial-gradient(1000px 600px at 50% 0%, rgba(255,255,255,0.07), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,0.05), transparent 42%),
    rgba(12,12,14,0.94);
}


.modalHeader{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 14px 14px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.10);
}

.modalTitle{
  margin: 0;
  font-family: "Cinzel", serif;
  letter-spacing: 2px;
  font-size: 14px;
  font-weight: 700;
  color: rgba(236,236,236,0.95);
}

.modalClose{
  border: 1px solid rgba(210,190,120,0.28);
  background: rgba(210,190,120,0.10);
  color: rgba(236,236,236,0.92);
  padding: 9px 12px;
  border-radius: 12px;
  font-family: "Cinzel", serif;
  letter-spacing: 1px;
  font-size: 12px;
  cursor: pointer;
  transition: transform 160ms ease, border-color 160ms ease, background 160ms ease;
  white-space: nowrap;
}
.modalClose:hover{
  transform: translateY(-1px);
  border-color: rgba(210,190,120,0.40);
  background: rgba(210,190,120,0.14);
}

.modalBody{
  padding: 14px 14px 18px;
  overflow-y: auto;  
  overflow-x: hidden;
  flex: 1;          
}

.modalLead{
  margin: 0 0 12px;
  padding: 12px 12px;
  border: 1px solid rgba(210,190,120,0.16);
  border-radius: 14px;
  background:
    radial-gradient(700px 260px at 50% 0%, rgba(255,255,255,0.045), transparent 55%),
    rgba(0,0,0,0.10);
  text-align: center;
}

.modalLead p{
  margin: 0;
  line-height: 1.65;
  font-size: 14px;
  color: rgba(236,236,236,0.92);
}

.modalHero{
  margin: 0 0 12px;
  border: 1px solid rgba(210,190,120,0.16);
  border-radius: 14px;
  overflow: hidden;
  background: rgba(255,255,255,0.02);
}

.modalHero img{
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
}

/* 모달 안 키워드 + 아코디언(원본 스타일 재사용) */
.modalBody .keywordRow{
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  padding: 10px 10px 6px;
}

.modalBody .kwBtn{
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.03);
  color: rgba(236,236,236,0.92);
  padding: 9px 12px;
  border-radius: 999px;
  font-family: "Cinzel", serif;
  letter-spacing: 1px;
  font-size: 12px;
  cursor: pointer;
  transition: transform 160ms ease, border-color 160ms ease, background 160ms ease;
}
.modalBody .kwBtn:hover{
  transform: translateY(-1px);
  border-color: rgba(210,190,120,0.35);
  background: rgba(210,190,120,0.08);
}
.modalBody .kwBtn[aria-expanded="true"]{
  border-color: rgba(210,190,120,0.45);
  background: rgba(210,190,120,0.12);
}

.modalBody .accordion{
  margin: 8px 6px 0;
  border: 1px solid rgba(210,190,120,0.18);
  border-radius: 14px;
  background: rgba(255,255,255,0.03);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.45) inset;
  overflow: hidden;
}

.modalBody .accPanel{
  display: none;
  padding: 12px 12px 10px;
  text-align: left;
}
.modalBody .accPanel.active{
  display: block;
}

.modalBody .accPanel h3{
  margin: 0 0 8px;
  font-family: "Cinzel", serif;
  letter-spacing: 1px;
  font-size: 13px;
  color: rgba(210,190,120,0.85);
}

.modalBody .accPanel p{
  margin: 0 0 10px;
  line-height: 1.75;
  font-size: 14px;
  color: rgba(236,236,236,0.92);
}

/* 모션 줄이기 */
@media (prefers-reduced-motion: reduce){
  .regionInner,
  .regionThumb img,
  .regionCta,
  .familyInner,
  .familyThumb img,
  .familyCta,
  .modalClose{
    transition: none !important;
  }
}

/* ====== 기존 페이드 ====== */
.fadeOut{ opacity:0; }

/* 모달 열리면 배경 스크롤 잠금 */
body.modal-open{
  overflow: hidden;
}
</style>
</head>

<body>

<nav class="topNav" id="topNav">
  <a href="#" data-page="myth" class="active">창세 신화</a>
  <a href="#" data-page="families">가문</a>
  <a href="#" data-page="regions">지역</a>
  <a href="#" data-page="map">전체 지도</a>
</nav>

<div class="vignette"></div>

<div class="stage">

  <section id="intro">
    <h2>태초의 신이 먹힌 밤</h2>
    <div class="press" id="pressBtn">PRESS ENTER</div>
  </section>

  <section id="mainContent">
    <!-- ✅ 1) 창세 신화 -->
    <div class="page active" id="page-myth">
      <h1>창세 신화</h1>
      <div class="myth">
        <p>태초에 하나의 신이 세계를 창조하고, 그 위에 군림했다.</p>
        <p>신은 동시에 여러 피조물을 만들어 자신이 만든 땅을 돌보게 했다.</p>

        <p>그러나 시간이 흐르며 피조물들 사이에는 불만이 싹트기 시작했다.</p>
        <p>그리고 어느 날, 한 피조물의 선동에 의해 그들은 잠든 신을 덮쳤다.</p>
        <p>피조물들은 신의 육신을 다섯 조각으로 나누어, 그것을 먹었다.</p>

        <p><strong class="blood">눈 · 혀 · 심장 · 뼈 · 그리고 피.</strong></p>

        <p>신을 집어삼킨 순간, 그들은 절대적인 권능을 하나씩 계승했다.</p>
        <p>눈을 먹은 자는 미래를 꿰뚫어보는 예지력을 얻었고,</p>
        <p>혀를 먹은 자는 세계를 굴복시키는 언령을 손에 넣었다.</p>
        <p>심장을 먹은 자는 죽지 않는 생명을,</p>
        <p>뼈를 먹은 자는 파괴되지 않는 육신을,</p>
        <p>피를 마신 자는 절대적인 혈맹의 권능을 얻었다.</p>

        <p>한낱 피조물에 불과하던 그들은 이제 신의 힘을 행사하는 존재가 되었고,</p>
        <p>스스로를 ‘신식자(神食者)’라 칭하며</p>
        <p>신이 창조한 세계를 나누어 통치하기 시작했다.</p>

        <p>그러나 그들은 미처 깨닫지 못했다.</p>
        <p>신이 먹힌 그 자리에 남아 있던 것,</p>
        <p>‘그림자’의 존재를.</p>

        <p>그 그림자를 훔쳐 달아난 또 다른 피조물이 있었다.</p>
        <p>그는 신식자들의 지배가 미치지 않는 세계의 경계로 숨어들어,</p>
        <p>잊힌 신의 부활을 준비하기 시작했다.</p>
      </div>
    </div>

    <!-- ✅ 2) 가문 -->
    <div class="page" id="page-families">
      <h1>가문</h1>
      <p class="lead">
        신의 육신을 나눠 삼킨 다섯 혈통은 서로 다른 권능과 <span class="blood">저주</span>를 물려받았다.
      </p>

      <div class="familyGrid" id="familyGrid">

        <!-- 노르벨 -->
        <div class="familyCard" role="button" tabindex="0" aria-label="노르벨 가문 기록 열기">
          <div class="familyInner">
            <div class="familyHint"><span class="familyHintDot"></span>CLICK TO OPEN</div>
            <div class="familyThumb">
              <!-- ✅ PNG 경로: assets/img/family_norbel.png -->
              <img src="assets/img/family_norbel.png" alt="아드리안 노르벨" loading="lazy">
            </div>

            <div class="familyFront">
              <h2>노르벨</h2>
              <p>예지와 계시를 다룬다. 노르벨의 자손들은 모두 맹인으로 태어난다.</p>
              <p>이들은 모든 신식자를 죄인으로 규정하고 성지 벨세인에 머무르며 멸망을 대비하고 있다.</p>

              <div class="tagRow">
                <span class="tag">권능: 예지</span>
                <span class="tag">저주: 실명</span>
                <span class="tag">구역: 아르케인 산맥 일부</span>
              </div>

              <button class="familyCta" type="button" data-action="openFamily">인물 기록 보기 →</button>
            </div>

            <div class="familyBack"
              data-title="노르벨"
              data-hero="assets/img/family_norbel.png"
              data-hero-alt="아드리안 노르벨"
            >
              <div class="backSummary">
                <p>예지와 계시를 다룬다. 노르벨의 자손들은 모두 맹인으로 태어난다. 성지 '벨세인'에 머무르며 멸망을 대비한다.</p>
              </div>

              <div class="accordion">
                <div class="accPanel active">
                  <h3>■ 권능 · 저주 · 구역</h3>
                  <p><strong>권능:</strong> 예지</p>
                  <p><strong>저주:</strong> 실명</p>
                  <p><strong>구역:</strong> 아르케인 산맥 일부</p>
                </div>

                <div class="accPanel active">
                  <h3>■ 가주</h3>
                  <p><strong>가주:</strong> 아드리안 노르벨</p>
                  <p><strong>나이:</strong> 26세</p>
                  <p>오스카르트의 참략으로 인해 어린 나이에 부모를 잃고 노르벨의 수장이 된 인물.</p>
                  <p>12살이 될 무렵 어떤 예언을 받고 신식자 일족을 전부 죄인으로 규정 후 배척 및 은거 생활을 이어오고 있다.</p>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- 세르몬트 -->
        <div class="familyCard" role="button" tabindex="0" aria-label="세르몬트 가문 기록 열기">
          <div class="familyInner">
            <div class="familyHint"><span class="familyHintDot"></span>CLICK TO OPEN</div>
            <div class="familyThumb">
              <!-- ✅ PNG 경로: assets/img/family_sermont.png -->
              <img src="assets/img/family_sermont.png" alt="칼 세르몬트" loading="lazy">
            </div>

            <div class="familyFront">
              <h2>세르몬트</h2>
              <p>말과 서약이 곧 법이 된다. 언령은 현실을 초월하지만 반드시 대가를 치러야 한다.</p>
              <p>세르몬트 가문의 무덤엔 이름 없는 자들의 묘비가 존재한다.</p>

              <div class="tagRow">
                <span class="tag">권능: 마법</span>
                <span class="tag">저주: 단명</span>
                <span class="tag">구역: 레티아</span>
              </div>

              <button class="familyCta" type="button" data-action="openFamily">인물 기록 보기 →</button>
            </div>

            <div class="familyBack"
              data-title="세르몬트"
              data-hero="assets/img/family_sermont.png"
              data-hero-alt="칼 세르몬트"
            >
              <div class="backSummary">
                <p>말과 서약이 법이 되는 혈통. 언령은 현실을 초월하나 반드시 대가를 요구한다. 무덤엔 이름 없는 자들의 묘비가 남아 있다.</p>
              </div>

              <div class="accordion">
                <div class="accPanel active">
                  <h3>■ 권능 · 저주 · 구역</h3>
                  <p><strong>권능:</strong> 마법</p>
                  <p><strong>저주:</strong> 단명</p>
                  <p><strong>구역:</strong> 레티아</p>
                </div>

                <div class="accPanel active">
                  <h3>■ 가주</h3>
                  <p><strong>가주:</strong> 칼 세르몬트</p>
                  <p><strong>나이:</strong> 32세</p>
                  <p>분야를 불문하고 '마법' 자체에 엄청난 두각을 보였던 불세출의 천재.</p>
                  <p>비상한 두뇌 덕분에 세르몬트 가문의 정치 싸움에서 손쉽게 승리해 가주가 되었다.</p>
                  <p>최근 '어떤 학문'에 크게 흥미를 가져 검은 탑에 틀어박혔단 소문이 돌고 있다.</p>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- 발데인 -->
        <div class="familyCard" role="button" tabindex="0" aria-label="발데인 가문 기록 열기">
          <div class="familyInner">
            <div class="familyHint"><span class="familyHintDot"></span>CLICK TO OPEN</div>
            <div class="familyThumb">
              <!-- ✅ PNG 경로: assets/img/family_baldein.png -->
              <img src="assets/img/family_baldein.png" alt="일리야 발데인" loading="lazy">
            </div>

            <div class="familyFront">
              <h2>발데인</h2>
              <p>죽지 않는 생명과 회복을 다룬다. 하지만 불사에는 끝나지 않는 대가가 따른다.</p>
              <p>그들은 완전한 죽음에 이를 방법을 찾고 있다. 간절히. 필사적으로.</p>

              <div class="tagRow">
                <span class="tag">권능: 불사</span>
                <span class="tag">저주: 불사</span>
                <span class="tag">구역: 에스테라</span>
              </div>

              <button class="familyCta" type="button" data-action="openFamily">인물 기록 보기 →</button>
            </div>

            <div class="familyBack"
              data-title="발데인"
              data-hero="assets/img/family_baldein.png"
              data-hero-alt="일리야 발데인"
            >
              <div class="backSummary">
                <p>죽지 않는 생명과 회복. 불사는 구원이 아니라 끝나지 않는 대가다. 그들은 완전한 죽음을 찾고 있다.</p>
              </div>

              <div class="accordion">
                <div class="accPanel active">
                  <h3>■ 권능 · 저주 · 구역</h3>
                  <p><strong>권능:</strong> 불사</p>
                  <p><strong>저주:</strong> 불사</p>
                  <p><strong>구역:</strong> 에스테라</p>
                </div>

                <div class="accPanel active">
                  <h3>■ 가주</h3>
                  <p><strong>가주:</strong> 일리야 발데인</p>
                  <p><strong>나이:</strong> 21세</p>
                  <p>발데인 가문의 현 수장. 태어날 때부터 불사의 권능과 저주를 동시에 물려받았다.</p>
                  <p>선대 가주의 기록을 열람한 뒤로 그들의 노화는 멈추지 않으며, 육신은 서서히 붕괴해 간다는 사실을 누구보다 잘 인지하고 있다.</p>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- 오스카르트 -->
        <div class="familyCard" role="button" tabindex="0" aria-label="오스카르트 가문 기록 열기">
          <div class="familyInner">
            <div class="familyHint"><span class="familyHintDot"></span>CLICK TO OPEN</div>
            <div class="familyThumb">
              <!-- ✅ PNG 경로: assets/img/family_oskart.png -->
              <img src="assets/img/family_oskart.png" alt="이자크 오스카르트" loading="lazy">
            </div>

            <div class="familyFront">
              <h2>오스카르트</h2>
              <p>파괴되지 않는 육신을 좇는다. 전투와 시험을 신앙처럼 여긴다.</p>
              <p>그러나 강인함은 젊음과 함께 깎여나가고, 노쇠한 이들은 명예로운 죽음을 찾아 떠나야만 한다.</p>

              <div class="tagRow">
                <span class="tag">권능: 강화</span>
                <span class="tag">저주: 파괴욕</span>
                <span class="tag">구역: 스톤폴</span>
              </div>

              <button class="familyCta" type="button" data-action="openFamily">인물 기록 보기 →</button>
            </div>

            <div class="familyBack"
              data-title="오스카르트"
              data-hero="assets/img/family_oskart.png"
              data-hero-alt="이자크 오스카르트"
            >
              <div class="backSummary">
                <p>전투와 시험을 신앙처럼 여기는 혈통. 강인함은 젊음과 함께 깎이고, 노쇠한 이들은 명예로운 죽음을 찾아 떠난다.</p>
              </div>

              <div class="accordion">
                <div class="accPanel active">
                  <h3>■ 권능 · 저주 · 구역</h3>
                  <p><strong>권능:</strong> 강화</p>
                  <p><strong>저주:</strong> 파괴욕</p>
                  <p><strong>구역:</strong> 스톤폴</p>
                </div>

                <div class="accPanel active">
                  <h3>■ 가주</h3>
                  <p><strong>가주:</strong> 이자크 오스카르트</p>
                  <p><strong>나이:</strong> 36세</p>
                  <p>죽은 어미의 배를 가르고 태어났으나 오히려 그것을 자신이 오스카르트임을 증명하는 최초의 살상으로 받아들였다.</p>
                  <p>성장 과정에서 폭력성을 억누르지 않았고, 검과 피로 스스로를 단련했다.</p>
                  <p>전투연에서는 상대를 단순히 쓰러뜨리는 데 그치지 않고, 다시는 도전할 수 없도록 살해함으로써 왕의 자리에 올랐다.</p>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- 실렌하임 -->
        <div class="familyCard" role="button" tabindex="0" aria-label="실렌하임 가문 기록 열기">
          <div class="familyInner">
            <div class="familyHint"><span class="familyHintDot"></span>CLICK TO OPEN</div>
            <div class="familyThumb">
              <!-- ✅ PNG 경로: assets/img/family_silenheim.png -->
              <img src="assets/img/family_silenheim.png" alt="라자르 실렌하임" loading="lazy">
            </div>

            <div class="familyFront">
              <h2>실렌하임</h2>
              <p>혈맹과 귀속의 힘을 다룬다. 맹세는 영원한 생명과 젊음을 보장하지만, 자유를 거둔다.</p>
              <p>피의 맹약에 덧없이 묶인 이들은 오늘도 새로운 가족을 찾고 있다.</p>

              <div class="tagRow">
                <span class="tag">권능: 피의 맹약</span>
                <span class="tag">저주: 고독</span>
                <span class="tag">구역: 실렌하임 영지</span>
              </div>

              <button class="familyCta" type="button" data-action="openFamily">인물 기록 보기 →</button>
            </div>

            <div class="familyBack"
              data-title="실렌하임"
              data-hero="assets/img/family_silenheim.png"
              data-hero-alt="라자르 실렌하임"
            >
              <div class="backSummary">
                <p>혈맹과 귀속의 힘. 영원한 젊음은 자유의 대가로 지불된다. 피의 맹약에 묶인 이들은 오늘도 새로운 가족을 찾는다.</p>
              </div>

              <div class="accordion">
                <div class="accPanel active">
                  <h3>■ 권능 · 저주 · 구역</h3>
                  <p><strong>권능:</strong> 피의 맹약</p>
                  <p><strong>저주:</strong> 고독</p>
                  <p><strong>구역:</strong> 실렌하임 영지</p>
                </div>

                <div class="accPanel active">
                  <h3>■ 시조</h3>
                  <p><strong>이름:</strong> 라자르 실렌하임</p>
                  <p>흡혈 감염의 최초 보유자이자, 실렌하임 가문의 시조.</p>
                  <p>불사의 신체에 가까운 수명과 노화 지연을 얻는 대신, 생식 능력을 완전히 상실했다.</p>
                  <p>그 결핍을 채우기 위해 인공적으로 ‘혈연’을 만들어냈고, 흡혈을 통해 혈맹을 형성하는 체제를 구축했다.</p>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

    <!-- ✅ 3) 지역 -->
    <div class="page" id="page-regions">
      <h1>지역</h1>
      <p class="lead">카드를 누르면 기록서가 펼쳐진다. (전문은 모달에서 읽는다.)</p>

      <div class="regionGrid" id="regionGrid">

        <!-- 북부 -->
        <div class="regionFlip">
          <div class="regionCard" role="button" tabindex="0" data-region="north" aria-label="북부 아르케인 산맥 기록서 펼치기">
            <div class="regionInner">
              <div class="regionFront">
                <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
                <div class="regionThumb">
                  <img src="assets/img/north.png" alt="아르케인 산맥" loading="lazy">
                </div>
                <h2>아르케인 산맥</h2>
                <p>대륙 최북단 만년설 산맥.</p>

                <div class="regionMini">
                  <p class="miniSummary">눈과 얼음이 영토를 지배한다. 고산 협곡과 설빙 균열은 외부인의 길을 끊는다.</p>
                  <div class="regionMiniTags">
                    <span class="regionMiniTag">아르케인 산맥</span>
                    <span class="regionMiniTag">벨세인</span>
                  </div>
                  <button class="regionCta" type="button" data-action="openRecord">기록서 펼치기 →</button>
                </div>
              </div>

              <div class="regionBack">
                <div class="backWrap">
                  <div class="backTop">
                    <h3 class="backTitle">북부 기록</h3>
                    <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
                  </div>

                  <div class="backSummary">
                    <p>눈과 얼음이 영토를 지배한다. 고산 협곡과 설빙 균열은 외부인의 길을 끊는다.</p>
                  </div>

                  <div class="keywordRow" role="tablist" aria-label="북부 항목 선택">
                    <button class="kwBtn" type="button" data-item="north-area" aria-expanded="false">아르케인 산맥</button>
                    <button class="kwBtn" type="button" data-item="north-site" aria-expanded="false">벨세인</button>
                  </div>

                  <div class="accordion" aria-label="북부 상세">
                    <div class="accPanel" id="north-area">
                      <h3>■ 아르케인 산맥</h3>
                      <p>대륙 최북단을 가로지르는 거대한 만년설 지대. 공식 명칭은 아르케인 산맥.</p>
                      <p>연중 대부분이 눈과 얼음으로 뒤덮여 있으며, 해빙기는 짧고 여름조차 냉기를 품는다.</p>
                      <p>깎아지른 고산 협곡과 깊은 설빙 균열이 이어져 있어 외부인의 접근은 극히 어렵다.</p>
                      <p>과거 이 산맥은 노르벨 가문의 영토였다. 예언과 속죄를 중시하던 가문은 세속과 거리를 두고 산맥 깊은 곳에서 은거하듯 살아왔다.</p>
                      <p>그러나 현재 산맥 대부분은 오스카르트 가문이 점령한 상태다. 군사적 요충지로서의 가치를 노린 침공이었다고 전해진다.</p>
                      <p>눈의 일족은 적극적으로 저항하지 않았다. 그들의 선택이었는지, 의도된 반응이었는지는 밝혀지지 않았다.</p>
                    </div>

                    <div class="accPanel" id="north-site">
                      <h3>■ 백안의 전당 벨세인</h3>
                      <p>노르벨의 가주는 대대로 벨세인에서 속죄의 의식을 치른 뒤 예언을 행했다.</p>
                      <p>미래를 묻기 위해 찾아오는 자들이 있었으나, 예언의 전말은 가주 외에는 누구에게도 전해지지 않는다.</p>
                      <p>현재 산맥의 대부분은 오스카르트의 지배 아래에 있다. 다만 침략 당시 노르벨의 장로 일곱 명이 희생하여 벨세인만은 보전되었다고 기록되어 있다.</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 남부 -->
        <div class="regionFlip">
          <div class="regionCard" role="button" tabindex="0" data-region="south" aria-label="남부 레티아 기록서 펼치기">
            <div class="regionInner">
              <div class="regionFront">
                <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
                <div class="regionThumb">
                  <img src="assets/img/south.png" alt="레티아" loading="lazy">
                </div>
                <h2>레티아</h2>
                <p>카르니스 최대 항구이자 학술 도시</p>

                <div class="regionMini">
                  <p class="miniSummary">항구의 소음과 서고의 먼지가 공존한다. 바다를 통해 지식이 유입되고, 금서도 함께 들어온다.</p>
                  <div class="regionMiniTags">
                    <span class="regionMiniTag">레티아</span>
                    <span class="regionMiniTag">검은 탑</span>
                  </div>
                  <button class="regionCta" type="button" data-action="openRecord">기록서 펼치기 →</button>
                </div>
              </div>

              <div class="regionBack">
                <div class="backWrap">
                  <div class="backTop">
                    <h3 class="backTitle">남부 기록</h3>
                    <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
                  </div>

                  <div class="backSummary">
                    <p>항구의 소음과 서고의 먼지가 공존한다. 바다를 통해 지식이 유입되고, 금서도 함께 들어온다.</p>
                  </div>

                  <div class="keywordRow" role="tablist" aria-label="남부 항목 선택">
                    <button class="kwBtn" type="button" data-item="south-area" aria-expanded="false">레티아</button>
                    <button class="kwBtn" type="button" data-item="south-site" aria-expanded="false">검은 탑</button>
                  </div>

                  <div class="accordion" aria-label="남부 상세">
                    <div class="accPanel" id="south-area">
                      <h3>■ 레티아</h3>
                      <p>카르니스 최대 규모의 항구이자 학술 도시.</p>
                      <p>남부 해안에 위치하며, 대륙에서 가장 활발한 해상 교역이 이루어지는 곳이다. 정확한 건립 연대는 전해지지 않지만, 세르몬트 가문이 본거지로 삼은 이후 도시의 성격이 급격히 변했다.</p>
                      <p>세르몬트는 해상 교역을 장려했고, 카르니스 내부 세력뿐 아니라 바다 너머의 이민족들과도 적극적으로 교류하였다.</p>
                      <p>그 과정에서 외부의 문화, 기술, 언어, 학문이 유입되었고, 레티아는 단순한 항구 도시에서 지식의 중심지로 발전했다.</p>
                      <p>현재 레티아는 상인과 선원뿐 아니라 학자, 기록관, 연금술사, 기술자 등 다양한 탐구자들이 모이는 도시다. 대륙에서 가장 많은 외래 문헌과 이국 서적이 유통되는 곳이기도 하다.</p>
                    </div>

                    <div class="accPanel" id="south-site">
                      <h3>■ 검은 탑</h3>
                      <p>세르몬트 가문의 성 인근에는 ‘검은 탑’이라 불리는 거대한 석조 탑이 존재한다. 도시의 상징이자, 레티아가 학술 도시로 자리 잡게 된 핵심 시설이다.</p>
                      <p>검은 탑은 총 100층 구조로 이루어져 있으며, 내부에는 방대한 연구 서적, 학술지, 고문서, 각종 기록, 이민족 문헌, 금서 등이 보관되어 있다. 대륙에서 가장 큰 지식 보관 시설로 알려져 있다.</p>
                      <p>탑은 상층부로 갈수록 보안이 강화되며, 일부 층은 외부에 존재 자체가 공개되지 않는다. 최상층에서 어떤 연구가 이루어지는지는 기밀로 취급된다.</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 동부 -->
        <div class="regionFlip">
          <div class="regionCard" role="button" tabindex="0" data-region="east" aria-label="동부 기록서 펼치기">
            <div class="regionInner">
              <div class="regionFront">
                <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
                <div class="regionThumb">
                  <img src="assets/img/east.png" alt="매바람 황야와 스톤폴" loading="lazy">
                </div>
                <h2>매바람 황야 · 스톤폴</h2>
                <p>메마른 황야와 협곡 고개 요새</p>

                <div class="regionMini">
                  <p class="miniSummary">낮의 열기와 밤의 냉기가 번갈아 목을 조른다. 바람은 길을 지우고, 요새는 길을 소유한다.</p>
                  <div class="regionMiniTags">
                    <span class="regionMiniTag">매바람 황야</span>
                    <span class="regionMiniTag">스톤폴</span>
                  </div>
                  <button class="regionCta" type="button" data-action="openRecord">기록서 펼치기 →</button>
                </div>
              </div>

              <div class="regionBack">
                <div class="backWrap">
                  <div class="backTop">
                    <h3 class="backTitle">동부 기록</h3>
                    <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
                  </div>

                  <div class="backSummary">
                    <p>낮의 열기와 밤의 냉기가 번갈아 목을 조른다. 바람은 길을 지우고, 요새는 길을 소유한다.</p>
                  </div>

                  <div class="keywordRow" role="tablist" aria-label="동부 항목 선택">
                    <button class="kwBtn" type="button" data-item="east-area" aria-expanded="false">매바람 황야</button>
                    <button class="kwBtn" type="button" data-item="east-site" aria-expanded="false">스톤폴</button>
                  </div>

                  <div class="accordion" aria-label="동부 상세">
                    <div class="accPanel" id="east-area">
                      <h3>■ 매바람 황야</h3>
                      <p>대륙 동부에 펼쳐진 광활한 모래사막 지대. 공식 명칭은 매바람 황야라 불린다.</p>
                      <p>이 지역은 기후가 극단적이다. 낮에는 살을 태울 듯한 열기가 지속되고, 밤이 되면 급격히 기온이 떨어진다.</p>
                      <p>강한 모래바람이 자주 불어 시야를 가리며, 지형은 끊임없이 변한다.</p>
                      <p>황야에는 몬스터가 밀집해 있다. 특히 사막형 포식종과 변이 생물이 다수 서식하며, 이동 상단과 여행자들이 자주 습격을 당한다.</p>
                      <p>농경이나 정착엔 불리하지만 전략적 가치는 높다. 황야를 가로지르는 유일한 고개를 통제하는 자가 동부 교역로 전체를 장악하게 되기 때문이다.</p>
                    </div>

                    <div class="accPanel" id="east-site">
                      <h3>■ 고개 요새 스톤폴</h3>
                      <p>매바람 황야 중앙의 협곡 고개에 세워진 대형 석조 요새. 이곳을 스톤폴이라 부른다.</p>
                      <p>가파른 절벽 사이에 자리 잡은 천연 요충지로, 동서 교역로의 관문 역할을 한다.</p>
                      <p>현재 스톤폴은 오스카르트 가문의 지배 아래에 있다. 가문은 이곳에서 10년마다 ‘전투연’을 열어 가장 강한 자를 왕으로 추대해왔다.</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 서부 -->
        <div class="regionFlip">
          <div class="regionCard" role="button" tabindex="0" data-region="west" aria-label="서부 실렌하임 영지 기록서 펼치기">
            <div class="regionInner">
              <div class="regionFront">
                <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
                <div class="regionThumb">
                  <img src="assets/img/west.png" alt="실렌하임 영지" loading="lazy">
                </div>
                <h2>실렌하임 영지</h2>
                <p>빛이 들지 않는 혈맹의 땅</p>

                <div class="regionMini">
                  <p class="miniSummary">안개가 숲을 봉인하고, 거래가 인간을 봉인한다. 이름이 지워진 거래는 피로 남는다.</p>
                  <div class="regionMiniTags">
                    <span class="regionMiniTag">실렌하임 영지</span>
                    <span class="regionMiniTag">암시장</span>
                  </div>
                  <button class="regionCta" type="button" data-action="openRecord">기록서 펼치기 →</button>
                </div>
              </div>

              <div class="regionBack">
                <div class="backWrap">
                  <div class="backTop">
                    <h3 class="backTitle">서부 기록</h3>
                    <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
                  </div>

                  <div class="backSummary">
                    <p>안개가 숲을 봉인하고, 거래가 인간을 봉인한다. 이름이 지워진 거래는 피로 남는다.</p>
                  </div>

                  <div class="keywordRow" role="tablist" aria-label="서부 항목 선택">
                    <button class="kwBtn" type="button" data-item="west-area" aria-expanded="false">실렌하임 영지</button>
                    <button class="kwBtn" type="button" data-item="west-site" aria-expanded="false">암시장</button>
                  </div>

                  <div class="accordion" aria-label="서부 상세">
                    <div class="accPanel" id="west-area">
                      <h3>■ 실렌하임 영지</h3>
                      <p>대륙 서쪽 끝, 해가 길게 머무르지 않는 땅. 이곳을 실렌하임 영지라 부른다.</p>
                      <p>연중 짙은 안개가 숲을 뒤덮고 있으며, 일조량이 부족해 농경은 제한적이다. 대신 음습한 숲과 습지가 광범위하게 형성되어 있다.</p>
                      <p>영지는 하나의 중심 도시가 아닌, 점처럼 흩어진 거점들로 이루어져 있다. 각 거점은 독립적으로 보이지만, 영주인 '첫 아비' 라자르 실렌하임의 혈연으로 이루어져 있으며, 이를 ‘혈맹 거점’이라 부른다.</p>
                    </div>

                    <div class="accPanel" id="west-site">
                      <h3>■ 암시장</h3>
                      <p>실렌하임 영지는 대륙 최대 규모의 암시장이 형성된 지역으로 알려져 있다. 밀수품과 금지된 의식 도구, 신원 세탁과 인신 매매까지, 공식 기록에 남지 않는 거래가 주로 이루어진다.</p>
                      <p>일부 주술적 거래에는 실렌하임 혈맹의 권능이 개입된다. 이때 체결되는 것이 이른바 ‘피 계약’이다.</p>
                      <p>겉으로는 단순한 맹약처럼 보이지만, 계약이 성립되는 순간 당사자는 혈맹의 질서에 묶인다. 그 과정에서 속임수에 휘말려 실렌하임 일족으로 편입되는 자도 적지 않다.</p>
                      <p>한번 피로 맺어진 계약은 쉽게 끊어지지 않는다. 영지를 벗어난 뒤에도 그 효력이 사라지지 않는다고 전해진다.</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 중앙 -->
        <div class="regionFlip">
          <div class="regionCard" role="button" tabindex="0" data-region="central" aria-label="중앙 에스테라 기록서 펼치기">
            <div class="regionInner">
              <div class="regionFront">
                <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
                <div class="regionThumb">
                  <img src="assets/img/central.png" alt="에스테라" loading="lazy">
                </div>
                <h2>에스테라</h2>
                <p>사치와 향락의 도시</p>

                <div class="regionMini">
                  <p class="miniSummary">원형의 도시는 결계로 묶였고, 쾌락은 가격표로 묶였다. 돌에 새겨진 이름은 도시의 비밀을 지킨다.</p>
                  <div class="regionMiniTags">
                    <span class="regionMiniTag">에스테라</span>
                    <span class="regionMiniTag">결계석</span>
                  </div>
                  <button class="regionCta" type="button" data-action="openRecord">기록서 펼치기 →</button>
                </div>
              </div>

              <div class="regionBack">
                <div class="backWrap">
                  <div class="backTop">
                    <h3 class="backTitle">중앙 기록</h3>
                    <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
                  </div>

                  <div class="backSummary">
                    <p>원형의 도시는 결계로 묶였고, 쾌락은 가격표로 묶였다. 돌에 새겨진 이름은 도시의 비밀을 지킨다.</p>
                  </div>

                  <div class="keywordRow" role="tablist" aria-label="중앙 항목 선택">
                    <button class="kwBtn" type="button" data-item="central-area" aria-expanded="false">에스테라</button>
                    <button class="kwBtn" type="button" data-item="central-site" aria-expanded="false">결계석</button>
                  </div>

                  <div class="accordion" aria-label="중앙 상세">
                    <div class="accPanel" id="central-area">
                      <h3>■ 에스테라</h3>
                      <p>사치와 향락의 도시. 지상낙원이라 불린다.</p>
                      <p>카르니스 대륙 중앙에 자리 잡은 원형 도시로, 결계석으로 이루어진 세 겹의 원형 경계로 나뉘어 있다.</p>
                      <p>에스테라는 오래전부터 상업과 쾌락 산업으로 번영해왔다. 대륙 각지의 상인, 귀족, 추방자, 모험가들이 이곳을 찾는다.</p>
                      <p>제 2환에는 고급 연회장과 향락관, 도박장, 사교 클럽이 밀집해 있다. 매춘은 공공연히 이루어지며, 해당 구역에서는 합법적인 사업으로 인정된다.</p>
                      <p>에스테라에서 쾌락은 죄가 아니다. 단, 값이 매겨질 뿐.</p>
                      <p>최근에는 출처가 불분명한 신종 향정 물질이 유통되고 있다. ‘별가루’, ‘백몽’, ‘낙원의 숨결’ 등 다양한 이름으로 불리며, 복용 시 극도의 황홀감과 감각 왜곡을 유발한다고 알려져 있다.</p>
                      <p>이 물질의 최초 유통 경로는 밝혀지지 않았으나, 현재 에스테라가 주요 집산지로 지목되고 있다. 발데인 가문은 이를 공식적으로 부인하고 있다.</p>
                    </div>

                    <div class="accPanel" id="central-site">
                      <h3>■ 결계석</h3>
                      <p>각 경계에는 일정 간격으로 묘비 형태의 돌이 박혀 있다. 이를 ‘결계석’이라 부른다.</p>
                      <p>투박하게 다듬은 검은 돌을 땅에 깊이 꽂아 세운 구조이며, 표면에는 작은 문양과 이름이 새겨져 있다.</p>
                      <p>겉보기에는 오래된 묘비와 다를 바 없다.</p>
                      <p>결계석은 에스테라를 보호하는 결계를 유지하는 장치로 알려져 있다. 외부의 침입, 대규모 재난, 마력 교란을 차단하는 기능을 가진다고 전해진다.</p>
                      <p>돌의 내부 구조와 작동 원리에 대해서는 발데인 가문 외에는 정확히 아는 자가 없다.</p>
                      <p>일부 학자는 결계석이 단순한 마력 축적 장치가 아니라 ‘지속적인 동력’을 필요로 하는 구조라고 주장한다. 그러나 이에 대한 공식 기록은 존재하지 않는다.</p>
                      <p>비석 한쪽에 새겨진 이름이 무엇을 의미하는지에 대해서도 도시는 명확한 답을 내놓지 않는다.</p>
                      <p>발데인 가문은 이를 '도시를 위한 헌신자들의 기록'이라 설명할 뿐이다.</p>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- ✅ 4) 전체 지도 (자리만) -->
    <div class="page" id="page-map">
      <h1>전체 지도</h1>
      <p class="lead">지도 이미지 추가 예정.</p>
    </div>

  </section>
</div>

<!-- ✅ 공용 모달(지역+가문 공용) -->
<div class="modalOverlay" id="regionModal" aria-hidden="true">
  <div class="modalDialog" role="dialog" aria-modal="true" aria-labelledby="regionModalTitle">
    <div class="modalHeader">
      <h3 class="modalTitle" id="regionModalTitle">기록</h3>
      <button class="modalClose" type="button" data-action="closeModal" aria-label="기록서 닫기">✕ 닫기</button>
    </div>
    <div class="modalBody" id="regionModalBody">
      <!-- JS로 내용 주입 -->
    </div>
  </div>
</div>

<!-- 🎵 BGM -->
<audio id="bgm" autoplay loop muted>
  <source src="bgm.mp3" type="audio/mpeg">
</audio>

<div id="audioControl">
  <button id="bgmToggle" aria-label="BGM Toggle">
    <svg id="playIcon" viewBox="0 0 24 24">
      <polygon points="8,5 19,12 8,19"></polygon>
    </svg>
    <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none;">
      <rect x="6" y="5" width="4" height="14"></rect>
      <rect x="14" y="5" width="4" height="14"></rect>
    </svg>
  </button>
  <input type="range" id="volumeSlider" min="0" max="100" value="50">
</div>

<style>
#audioControl{
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10;

  display: flex;
  align-items: center;
  gap: 14px;
}

#volumeSlider{
  width: 120px;
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
}

#volumeSlider::-webkit-slider-runnable-track{
  height: 2px;
  background: rgba(255,255,255,0.4);
  border-radius: 2px;
}

#volumeSlider::-moz-range-track{
  height: 2px;
  background: rgba(255,255,255,0.4);
  border-radius: 2px;
}

#volumeSlider::-webkit-slider-thumb{
  -webkit-appearance: none;
  width: 10px;
  height: 10px;
  background: white;
  border-radius: 50%;
  margin-top: -4px;
  transition: transform 0.2s ease;
}

#volumeSlider::-moz-range-thumb{
  width: 10px;
  height: 10px;
  background: white;
  border-radius: 50%;
  border: none;
  transition: transform 0.2s ease;
}

#volumeSlider:hover::-webkit-slider-thumb{ transform: scale(1.2); }
#volumeSlider:hover::-moz-range-thumb{ transform: scale(1.2); }

#bgmToggle{
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
}

#bgmToggle svg{
  width: 22px;
  height: 22px;
  fill: white;
  opacity: 0.6;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

#bgmToggle:hover svg{
  opacity: 1;
  transform: scale(1.1);
}
</style>

<script>
const intro = document.getElementById("intro");
const mainContent = document.getElementById("mainContent");
const pressBtn = document.getElementById("pressBtn");

const bgm = document.getElementById("bgm");
const volumeSlider = document.getElementById("volumeSlider");
const bgmToggle = document.getElementById("bgmToggle");

const playIcon = document.getElementById("playIcon");
const pauseIcon = document.getElementById("pauseIcon");

const topNav = document.getElementById("topNav");
const navLinks = topNav.querySelectorAll("a[data-page]");

let started = false;
let fadeTimer = null;

/* 페이지(섹션) 전환 */
function showPage(key){
  const pages = document.querySelectorAll(".page");
  pages.forEach(p => p.classList.remove("active"));

  const target = document.getElementById("page-" + key);
  if (target) target.classList.add("active");

  navLinks.forEach(a => a.classList.toggle("active", a.dataset.page === key));
  window.scrollTo({ top: 0, behavior: "smooth" });
}

/* 오디오 */
function getTargetVolume(){
  return volumeSlider.value / 100;
}

function updateBgmButton(){
  if(bgm.paused){
    playIcon.style.display = "block";
    pauseIcon.style.display = "none";
  } else {
    playIcon.style.display = "none";
    pauseIcon.style.display = "block";
  }
}

function fadeTo(target, duration = 600, onDone){
  if (fadeTimer) clearInterval(fadeTimer);

  const startVol = bgm.volume;
  const diff = target - startVol;
  const steps = Math.max(1, Math.floor(duration / 30));
  let currentStep = 0;

  fadeTimer = setInterval(()=>{
    currentStep++;
    const progress = currentStep / steps;
    bgm.volume = startVol + diff * progress;

    if (currentStep >= steps){
      clearInterval(fadeTimer);
      fadeTimer = null;
      bgm.volume = target;
      if (onDone) onDone();
    }
  }, 30);
}

/* 시작 */
function startStory(){
  if(started) return;
  started = true;

  intro.classList.add("fadeOut");

  bgm.muted = false;
  bgm.volume = 0;

  bgm.play().then(()=>{
    fadeTo(getTargetVolume(), 800);
    updateBgmButton();
  }).catch(()=>{});

  setTimeout(()=>{
    intro.style.display="none";
    mainContent.style.display="block";
    mainContent.classList.add("show");
    topNav.classList.add("show");
  },500);
}

/* Enter (인트로 시작) */
document.addEventListener("keydown", e=>{
  if(e.key==="Enter" && !started) startStory();
});

/* 클릭 */
if(pressBtn) pressBtn.addEventListener("click", startStory);
if(intro) intro.addEventListener("click", startStory);

/* 메뉴 클릭 */
navLinks.forEach(a=>{
  a.addEventListener("click", (e)=>{
    e.preventDefault();
    const key = a.dataset.page;
    if (!started){
      startStory();
      setTimeout(()=> showPage(key), 600);
      return;
    }
    showPage(key);
  });
});

/* 볼륨 */
volumeSlider.addEventListener("input", ()=>{
  if(!bgm.paused){
    fadeTo(getTargetVolume(), 200);
  }
});

/* 토글 */
bgmToggle.addEventListener("click", ()=>{
  if(!started){
    startStory();
    return;
  }

  if(bgm.paused){
    bgm.volume = 0;
    bgm.play().then(()=>{
      fadeTo(getTargetVolume(), 500);
      updateBgmButton();
    });
  } else {
    fadeTo(0, 400, ()=>{
      bgm.pause();
      updateBgmButton();
    });
  }
});

/* =========================
   ✅ 공용 모달 (지역 + 가문)
   - 카드 클릭/버튼 클릭 -> 모달 오픈
   - 지역: kwBtn -> 패널 토글
   - 가문: hero 이미지 + 텍스트(아코디언 없이도 됨)
   ========================= */
const regionGrid = document.getElementById("regionGrid");
const familyGrid = document.getElementById("familyGrid");
const modal = document.getElementById("regionModal");
const modalTitle = document.getElementById("regionModalTitle");
const modalBody = document.getElementById("regionModalBody");

let lastFocusEl = null;

function clearModal(){
  modalBody.innerHTML = "";
}

function setModalOpen(isOpen){
  if(isOpen){
    modal.classList.add("show");
    modal.setAttribute("aria-hidden","false");
    document.body.classList.add("modal-open");
  } else {
    modal.classList.remove("show");
    modal.setAttribute("aria-hidden","true");
    document.body.classList.remove("modal-open");
  }
}

function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/* ✅ 지역: 기존 로직 유지 */
function openModalFromRegionCard(card){
  if(!card) return;

  lastFocusEl = document.activeElement;

  const titleText = card.querySelector(".regionFront h2")?.textContent?.trim() || "기록";
  const frontDesc = card.querySelector(".regionFront p")?.textContent?.trim() || "";
  const summaryText = card.querySelector(".regionBack .backSummary p")?.textContent?.trim() || frontDesc;

  modalTitle.textContent = titleText;

  clearModal();

  const lead = document.createElement("div");
  lead.className = "modalLead";
  lead.innerHTML = `<p>${escapeHtml(summaryText)}</p>`;
  modalBody.appendChild(lead);

  const sourceWrap = card.querySelector(".regionBack .backWrap");
  if(sourceWrap){
    const sourceKeywordRow = sourceWrap.querySelector(".keywordRow");
    const sourceAccordion = sourceWrap.querySelector(".accordion");

    if(sourceKeywordRow){
      const kwClone = sourceKeywordRow.cloneNode(true);
      kwClone.querySelectorAll(".kwBtn").forEach(btn=>{
        btn.setAttribute("aria-expanded","false");
      });
      modalBody.appendChild(kwClone);
    }

    if(sourceAccordion){
      const accClone = sourceAccordion.cloneNode(true);
      accClone.querySelectorAll(".accPanel").forEach(p=> p.classList.remove("active"));
      modalBody.appendChild(accClone);
    }

    const firstBtn = modalBody.querySelector(".kwBtn");
    if(firstBtn && firstBtn.dataset.item){
      modalToggleAccordion(firstBtn.dataset.item);
      firstBtn.focus({preventScroll:true});
    }
  } else {
    const fallback = document.createElement("div");
    fallback.className = "modalLead";
    fallback.innerHTML = `<p>기록 원문을 찾지 못했다. (구조가 바뀌었는지 확인해줘.)</p>`;
    modalBody.appendChild(fallback);
  }

  setModalOpen(true);
}

function modalToggleAccordion(targetId){
  const kwBtns = modalBody.querySelectorAll(".kwBtn");
  const panels = modalBody.querySelectorAll(".accPanel");
  const targetPanel = modalBody.querySelector("#" + CSS.escape(targetId));
  if(!targetPanel) return;

  const isActive = targetPanel.classList.contains("active");

  kwBtns.forEach(b=> b.setAttribute("aria-expanded","false"));
  panels.forEach(p=> p.classList.remove("active"));

  if(!isActive){
    targetPanel.classList.add("active");
    const ownerBtn = modalBody.querySelector(`.kwBtn[data-item="${CSS.escape(targetId)}"]`);
    if(ownerBtn) ownerBtn.setAttribute("aria-expanded","true");
    targetPanel.scrollIntoView({behavior:"smooth", block:"start"});
  }
}

/* ✅ 가문: 공용 모달 */
function openModalFromFamilyCard(card){
  if(!card) return;

  lastFocusEl = document.activeElement;

  const back = card.querySelector(".familyBack");
  const titleText = back?.dataset?.title || card.querySelector(".familyFront h2")?.textContent?.trim() || "가문";
  const heroSrc = back?.dataset?.hero || "";
  const heroAlt = back?.dataset?.heroAlt || titleText;

  modalTitle.textContent = titleText;

  clearModal();

  if(heroSrc){
    const hero = document.createElement("div");
    hero.className = "modalHero";
    hero.innerHTML = `<img src="${escapeHtml(heroSrc)}" alt="${escapeHtml(heroAlt)}" loading="lazy">`;
    modalBody.appendChild(hero);
  }

  const summary = back?.querySelector(".backSummary p")?.textContent?.trim() || "";
  if(summary){
    const lead = document.createElement("div");
    lead.className = "modalLead";
    lead.innerHTML = `<p>${escapeHtml(summary)}</p>`;
    modalBody.appendChild(lead);
  }

  const acc = back?.querySelector(".accordion");
  if(acc){
    const accClone = acc.cloneNode(true);
    modalBody.appendChild(accClone);
  }

  setModalOpen(true);
}

function closeModal(){
  setModalOpen(false);
  clearModal();
  if(lastFocusEl && typeof lastFocusEl.focus === "function"){
    lastFocusEl.focus();
  }
  lastFocusEl = null;
}

/* 지역 카드 클릭 -> 모달 */
if(regionGrid){
  regionGrid.addEventListener("click", (e)=>{
    const cta = e.target.closest('button[data-action="openRecord"]');
    if(cta){
      e.stopPropagation();
      const card = e.target.closest(".regionCard");
      openModalFromRegionCard(card);
      return;
    }
    const card = e.target.closest(".regionCard");
    if(card){
      openModalFromRegionCard(card);
    }
  });

  regionGrid.addEventListener("keydown", (e)=>{
    const card = e.target.closest(".regionCard");
    if(!card) return;
    if(e.key === "Enter" || e.key === " "){
      e.preventDefault();
      openModalFromRegionCard(card);
    }
  });
}

/* 가문 카드 클릭 -> 모달 */
if(familyGrid){
  familyGrid.addEventListener("click", (e)=>{
    const cta = e.target.closest('button[data-action="openFamily"]');
    if(cta){
      e.stopPropagation();
      const card = e.target.closest(".familyCard");
      openModalFromFamilyCard(card);
      return;
    }
    const card = e.target.closest(".familyCard");
    if(card){
      openModalFromFamilyCard(card);
    }
  });

  familyGrid.addEventListener("keydown", (e)=>{
    const card = e.target.closest(".familyCard");
    if(!card) return;
    if(e.key === "Enter" || e.key === " "){
      e.preventDefault();
      openModalFromFamilyCard(card);
    }
  });
}

/* 모달 내부 이벤트(닫기/바깥클릭/ESC + 지역 키워드) */
modal.addEventListener("click", (e)=>{
  if(e.target === modal){
    closeModal();
    return;
  }

  const closeBtn = e.target.closest('[data-action="closeModal"]');
  if(closeBtn){
    closeModal();
    return;
  }

  const kw = e.target.closest(".kwBtn");
  if(kw && kw.dataset.item){
    e.preventDefault();
    modalToggleAccordion(kw.dataset.item);
    return;
  }
});

document.addEventListener("keydown", (e)=>{
  if(e.key === "Escape"){
    if(modal.classList.contains("show")){
      e.preventDefault();
      closeModal();
    }
  }
});

updateBgmButton();
</script>

</body>
</html>
