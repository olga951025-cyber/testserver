<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>카르니스 연대기</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">

<style>
/* =========================
   Noonnu fonts
   ========================= */
@font-face{
  font-family: 'Independent';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.1/Dokrip.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* ✅ 인트로 제목 폰트 */
@font-face{
  font-family: 'NostalgicPoliceVibe';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2601-6@1.0/Griun_PolSensibility-Rg.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* ✅ 창세 신화 본문 폰트 */
@font-face{
  font-family: 'LeeSunShin';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/YiSunShinRegular.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

:root{
  --bg:#070708;
  --text:#ececec;
  --line:rgba(255,255,255,0.14);
  --blood:#8e2b2b;

  --paper: rgba(12,12,14,0.86);
  --paper2: rgba(255,255,255,0.035);
  --gold: rgba(210,190,120,0.55);
}

body{
  margin:0;
  background: var(--bg);
  color: var(--text);
  font-family: "IM Fell English", Georgia, "Times New Roman", serif;
  overflow-x:hidden;
}

/* 배경 비네팅 */
.vignette{
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(1200px 900px at 50% 55%, transparent 45%, rgba(0,0,0,0.82) 100%);
  z-index: 1;
}

/* 상단 메뉴바: 인트로에서는 숨김 */
.topNav{
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 20;

  display: flex;
  justify-content: center;
  gap: 18px;

  padding: 14px 16px;
  background: rgba(7,7,8,0.75);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid var(--line);

  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
  transition: opacity 260ms ease, transform 260ms ease;
}

.topNav.show{
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.topNav a{
  font-family: "Cinzel", serif;
  color: rgba(236,236,236,0.78);
  text-decoration: none;
  letter-spacing: 2px;
  font-size: 12px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  transition: opacity 160ms ease, border-color 160ms ease, transform 160ms ease, color 160ms ease, background 160ms ease;
}

.topNav a:hover{
  opacity: 1;
  border-color: rgba(255,255,255,0.18);
  transform: translateY(-1px);
}

.topNav a.active{
  color: rgba(236,236,236,1);
  border-color: rgba(210,190,120,0.35);
  background: rgba(210,190,120,0.08);
}

/* 무대 */
.stage{
  position: relative;
  z-index: 3;
  min-height: 100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 84px 24px 24px;
}

/* 인트로 */
#intro{
  width:100%;
  max-width:600px;
  text-align:center;
  border:1px solid var(--line);
  border-radius:18px;
  padding:40px 20px;
  background:rgba(255,255,255,0.04);
  transition: opacity 600ms ease;
}

/* ✅ 인트로 제목: 폰트 + 붉은색 적용 */
#intro h2{
  font-family: 'NostalgicPoliceVibe', "Cinzel", serif;
  letter-spacing: 1px;
  font-weight: normal;
  color: var(--blood);
}

.press{
  margin-top:20px;
  display:inline-block;
  padding:10px 16px;
  border:1px solid rgba(255,255,255,0.3);
  border-radius:10px;
  letter-spacing:3px;
  cursor:pointer;
  font-family: "Cinzel", serif;
  font-size: 12px;
  opacity: 0.9;
}

/* 본문 패널 */
#mainContent{
  text-align: center;
  display:none;
  width:100%;
  max-width:760px;
  border-radius:18px;
  padding:34px 26px;

  background:
    radial-gradient(800px 500px at 50% 0%, rgba(255,255,255,0.05), transparent 55%),
    linear-gradient(180deg, var(--paper2), transparent 35%),
    var(--paper);

  border: 1px solid rgba(255,255,255,0.12);
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.6) inset,
    0 18px 50px rgba(0,0,0,0.55);

  opacity:0;
  transform:translateY(10px);
}

#mainContent.show{
  animation:appear 800ms ease forwards;
}

@keyframes appear{
  to{opacity:1; transform:translateY(0);}
}

h1{
  font-family: "Cinzel", serif;
  text-align:center;
  margin: 6px 0 16px;
  letter-spacing: 4px;
  font-weight: 700;
  font-size: 22px;
}

#page-myth > h1{
  font-family: 'Independent', serif;
  font-weight: 400;
  letter-spacing: 1px;
  font-size: 30px;
}

#page-myth .myth{
  font-family: 'LeeSunShin', "IM Fell English", Georgia, "Times New Roman", serif;
  font-weight: 400;
}

#page-myth .myth p,
#page-myth .myth strong,
#page-myth .myth .blood{
  font-family: inherit;
  font-weight: inherit;
}

#mainContent h1::after{
  content:"";
  display:block;
  width: 72%;
  height: 1px;
  margin: 14px auto 0;
  background: linear-gradient(90deg, transparent, rgba(210,190,120,0.45), transparent);
}

.page{
  display:none;
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 220ms ease, transform 220ms ease;
}

.page.active{
  display:block;
  opacity: 1;
  transform: translateY(0);
}

/* 창세신화 문단 */
.myth p{
  line-height: 1.75;
  margin: 0 0 8px;
  font-size: 16px;
  color: rgba(236,236,236,0.92);
}

.blood{
  color: var(--blood);
  font-weight: 400;
  letter-spacing:1px;
  text-shadow: 0 0 10px rgba(122,17,17,0.25);
}

#page-myth .blood{
  font-size: 1.13em;
  font-weight: 600;
}

/* ✅ 리드 문단 */
.lead{
  margin: 16px auto 18px;
  max-width: 640px;
  line-height: 1.65;
  font-size: 16px;
  color: rgba(236,236,236,0.92);
  opacity: 0.95;
  text-align: center;
}

/* 가문 카드 */
.familyGrid{
  margin-top: 18px;
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
  text-align: left;
}

@media (min-width: 720px){
  .familyGrid{ grid-template-columns: 1fr 1fr; }
}

.familyCard{
  border: 1px solid rgba(210,190,120,0.18);
  border-radius: 16px;
  padding: 16px 16px 14px;
  background: rgba(255,255,255,0.03);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.45) inset;
}

.familyCard h2{
  margin: 0 0 10px;
  font-family: "Cinzel", serif;
  letter-spacing: 2px;
  font-size: 15px;
  font-weight: 700;
  color: rgba(236,236,236,0.95);
  text-align: center;
}

.familyCard p{
  margin: 0 0 8px;
  line-height: 1.6;
  font-size: 15px;
  color: rgba(236,236,236,0.90);
}

.tagRow{
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.tag{
  font-family: "Cinzel", serif;
  font-size: 11px;
  letter-spacing: 1px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.03);
  color: rgba(236,236,236,0.85);
}

/* =========================
   ✅ 지역 섹션: 플립 카드 + 내부 아코디언
   (div role=button)
   ✅ 수정사항:
   1) 앞/뒤 면 레이어 안정화(둘 다 absolute)
   2) 1줄 1카드(항상 와이드)
   3) 플립 시 "어두워진 이미지 + 흰 텍스트 설명"이 확실히 보이도록
   ========================= */

.regionGrid{
  margin-top: 18px;
  display: grid;
  grid-template-columns: 1fr;   /* ✅ 항상 1열 */
  gap: 14px;
  text-align: left;
}

/* ✅ 더 이상 2열로 바꾸지 않음 */
@media (min-width: 720px){
  .regionGrid{ grid-template-columns: 1fr; }
}

/* 바깥 컨테이너 */
.regionFlip{
  perspective: 1200px;
}

/* 카드(이제 div) */
.regionCard{
  width: 100%;
  border: 0;
  padding: 0;
  background: transparent;
  text-align: left;
  cursor: pointer;
  user-select: none;
}

/* 키보드 포커스 */
.regionCard:focus-visible{
  outline: 2px solid rgba(210,190,120,0.55);
  outline-offset: 4px;
  border-radius: 18px;
}

/* 실제 회전하는 박스 */
.regionInner{
  position: relative;
  border: 1px solid rgba(210,190,120,0.18);
  border-radius: 16px;
  overflow: hidden;
  background: rgba(255,255,255,0.03);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.45) inset;

  transform-style: preserve-3d;
  transition: transform 360ms ease, border-color 180ms ease;
  min-height: 360px;
}

/* hover: 테두리만 */
.regionCard:hover .regionInner{
  border-color: rgba(210,190,120,0.35);
}

/* 플립 상태 */
.regionCard.is-flipped .regionInner{
  transform: rotateY(180deg);
  border-color: rgba(210,190,120,0.35);
}

/* ✅ 앞/뒤 면 공통: 둘 다 absolute로 완전히 겹치게 */
.regionFace{
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* ✅ 앞면도 absolute 유지 (여기서 relative로 바꾸면 망가짐) */
.regionFront{
  /* 일부러 position 지정 안 함: regionFace의 absolute를 그대로 씀 */
  background: rgba(0,0,0,0.00);
}

/* 썸네일 */
.regionThumb{
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  background: rgba(255,255,255,0.02);
  overflow: hidden;
}

.regionThumb img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;

  filter: grayscale(1) contrast(1.05) brightness(0.92);
  transform: scale(1.02);
  transition: filter 260ms ease, transform 260ms ease;
}

/* hover: 컬러 복귀 */
.regionCard:hover .regionThumb img,
.regionCard:focus-within .regionThumb img{
  filter: grayscale(0) contrast(1.02) brightness(1);
  transform: scale(1.06);
}

/* ✅ 플립되면 앞면 이미지가 어두워지게(뒤집힐 때 “표지 닫힘” 느낌) */
.regionCard.is-flipped .regionFront .regionThumb img{
  filter: grayscale(1) contrast(1.05) brightness(0.45);
  transform: scale(1.02);
}

.regionFront h2{
  margin: 14px 16px 8px;
  font-family: "Cinzel", serif;
  letter-spacing: 2px;
  font-size: 15px;
  font-weight: 700;
  color: rgba(236,236,236,0.95);
  text-align: center;
}

.regionFront p{
  margin: 0 16px 18px;
  line-height: 1.6;
  font-size: 15px;
  color: rgba(236,236,236,0.90);
  text-align: center;
}

/* 클릭 힌트 */
.hintBadge{
  position: absolute;
  top: 10px;
  left: 10px;
  z-index: 2;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(0,0,0,0.35);
  backdrop-filter: blur(6px);
  font-family: "Cinzel", serif;
  font-size: 11px;
  letter-spacing: 1px;
  color: rgba(236,236,236,0.85);
}

.hintDot{
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(210,190,120,0.7);
  box-shadow: 0 0 10px rgba(210,190,120,0.25);
}

/* 뒷면 */
.regionBack{
  transform: rotateY(180deg);
  background:
    radial-gradient(800px 500px at 50% 0%, rgba(255,255,255,0.05), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,0.04), transparent 40%),
    rgba(10,10,12,0.92);

  /* ✅ 텍스트는 확실히 밝게 */
  color: rgba(255,255,255,0.92);
}

/* 뒤면 내용 */
.backWrap{
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 14px 14px 14px;
}

.backTop{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 8px 10px;
  border-bottom: 1px solid rgba(255,255,255,0.10);
}

.backTitle{
  margin: 0;
  font-family: "Cinzel", serif;
  letter-spacing: 2px;
  font-size: 14px;
  font-weight: 700;
  color: rgba(236,236,236,0.95);
}

/* 뒤로 버튼 */
.backBtn{
  border: 1px solid rgba(210,190,120,0.28);
  background: rgba(210,190,120,0.10);
  color: rgba(236,236,236,0.92);
  padding: 9px 12px;
  border-radius: 12px;
  font-family: "Cinzel", serif;
  letter-spacing: 1px;
  font-size: 12px;
  cursor: pointer;
  transition: transform 160ms ease, border-color 160ms ease, background 160ms ease;
  white-space: nowrap;
}

.backBtn:hover{
  transform: translateY(-1px);
  border-color: rgba(210,190,120,0.40);
  background: rgba(210,190,120,0.14);
}

.backSummary{
  padding: 12px 10px 8px;
  text-align: center;
}

.backSummary p{
  margin: 0;
  line-height: 1.6;
  font-size: 14px;
  color: rgba(236,236,236,0.92);
}

/* 키워드 버튼 */
.keywordRow{
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  padding: 10px 10px 6px;
}

.kwBtn{
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.03);
  color: rgba(236,236,236,0.92);
  padding: 9px 12px;
  border-radius: 999px;
  font-family: "Cinzel", serif;
  letter-spacing: 1px;
  font-size: 12px;
  cursor: pointer;
  transition: transform 160ms ease, border-color 160ms ease, background 160ms ease;
}

.kwBtn:hover{
  transform: translateY(-1px);
  border-color: rgba(210,190,120,0.35);
  background: rgba(210,190,120,0.08);
}

.kwBtn[aria-expanded="true"]{
  border-color: rgba(210,190,120,0.45);
  background: rgba(210,190,120,0.12);
}

/* 아코디언 */
.accordion{
  margin: 8px 10px 0;
  border: 1px solid rgba(210,190,120,0.18);
  border-radius: 14px;
  background: rgba(255,255,255,0.03);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.45) inset;
  overflow: hidden;
}

.accPanel{
  display: none;
  padding: 12px 12px 10px;
  text-align: left;
}

.accPanel.active{
  display: block;
}

.accPanel h3{
  margin: 0 0 8px;
  font-family: "Cinzel", serif;
  letter-spacing: 1px;
  font-size: 13px;
  color: rgba(210,190,120,0.85);
}

.accPanel p{
  margin: 0 0 10px;
  line-height: 1.75;
  font-size: 14px;
  color: rgba(236,236,236,0.92);
}

/* 모션 줄이기 */
@media (prefers-reduced-motion: reduce){
  .regionInner,
  .regionThumb img{
    transition: none !important;
  }
  .regionCard.is-flipped .regionInner{
    transform: none !important;
  }
  .regionBack{
    transform: none !important;
    display: none;
  }
  .regionCard.is-flipped .regionBack{
    display: block;
    position: absolute;
    inset: 0;
  }
}
   
/* ====== 기존 페이드 ====== */
.fadeOut{ opacity:0; }
</style>
</head>

<body>

<nav class="topNav" id="topNav">
  <a href="#" data-page="myth" class="active">창세 신화</a>
  <a href="#" data-page="families">가문</a>
  <a href="#" data-page="regions">지역</a>
  <a href="#" data-page="map">전체 지도</a>
</nav>

<div class="vignette"></div>

<div class="stage">

  <section id="intro">
    <h2>태초의 신이 먹힌 밤</h2>
    <div class="press" id="pressBtn">PRESS ENTER</div>
  </section>

  <section id="mainContent">
    <!-- ✅ 1) 창세 신화 -->
    <div class="page active" id="page-myth">
      <h1>창세 신화</h1>
      <div class="myth">
        <p>태초에 하나의 신이 세계를 창조하고, 그 위에 군림했다.</p>
        <p>신은 동시에 여러 피조물을 만들어 자신이 만든 땅을 돌보게 했다.</p>

        <p>그러나 시간이 흐르며 피조물들 사이에는 불만이 싹트기 시작했다.</p>
        <p>그리고 어느 날, 한 피조물의 선동에 의해 그들은 잠든 신을 덮쳤다.</p>
        <p>피조물들은 신의 육신을 다섯 조각으로 나누어, 그것을 먹었다.</p>

        <p><strong class="blood">눈 · 혀 · 심장 · 뼈 · 그리고 피.</strong></p>

        <p>신을 집어삼킨 순간, 그들은 절대적인 권능을 하나씩 계승했다.</p>
        <p>눈을 먹은 자는 미래를 꿰뚫어보는 예지력을 얻었고,</p>
        <p>혀를 먹은 자는 세계를 굴복시키는 언령을 손에 넣었다.</p>
        <p>심장을 먹은 자는 죽지 않는 생명을,</p>
        <p>뼈를 먹은 자는 파괴되지 않는 육신을,</p>
        <p>피를 마신 자는 절대적인 혈맹의 권능을 얻었다.</p>

        <p>한낱 피조물에 불과하던 그들은 이제 신의 힘을 행사하는 존재가 되었고,</p>
        <p>스스로를 ‘신식자(神食者)’라 칭하며</p>
        <p>신이 창조한 세계를 나누어 통치하기 시작했다.</p>

        <p>그러나 그들은 미처 깨닫지 못했다.</p>
        <p>신이 먹힌 그 자리에 남아 있던 것,</p>
        <p>‘그림자’의 존재를.</p>

        <p>그 그림자를 훔쳐 달아난 또 다른 피조물이 있었다.</p>
        <p>그는 신식자들의 지배가 미치지 않는 세계의 경계로 숨어들어,</p>
        <p>잊힌 신의 부활을 준비하기 시작했다.</p>
      </div>
    </div>

    <!-- ✅ 2) 가문 -->
    <div class="page" id="page-families">
      <h1>가문</h1>
      <p class="lead">
        신의 육신을 나눠 삼킨 다섯 혈통은 서로 다른 권능과 <span class="blood">저주</span>를 물려받았다.
      </p>

      <div class="familyGrid">
        <article class="familyCard">
          <h2>노르벨</h2>
          <p>예지와 계시를 다룬다. 노르벨의 자손들은 모두 맹인으로 태어난다.</p>
          <p>이들은 모든 신식자를 죄인으로 규정하고 성지 '벨세인'에 머무르며 멸망을 대비하고 있다.</p>
          <div class="tagRow">
            <span class="tag">영토: 아르케인 산맥</span>
          </div>
        </article>

        <article class="familyCard">
          <h2>세르몬트</h2>
          <p>말과 서약이 곧 법이 된다. 언령은 현실을 초월하지만 반드시 대가를 치러야 한다.</p>
          <p>세르몬트 가문의 무덤엔 이름 없는 자들의 묘비가 존재한다.</p>
          <div class="tagRow">
            <span class="tag">영토: 레티아</span>
          </div>
        </article>

        <article class="familyCard">
          <h2>발데인</h2>
          <p>죽지 않는 생명과 회복을 다룬다. 하지만 불사에는 끝나지 않는 대가가 따른다.</p>
          <p>그들은 완전한 죽음에 이를 방법을 찾고 있다. 간절히. 필사적으로.</p>
          <div class="tagRow">
            <span class="tag">영토: 에스테라</span>
          </div>
        </article>

        <article class="familyCard">
          <h2>오스카르트</h2>
          <p>파괴되지 않는 육신을 좇는다. 전투와 시험을 신앙처럼 여긴다.</p>
          <p>그러나 강인함은 젊음과 함께 깎여나가고, 노쇠한 이들은 명예로운 죽음을 찾아 떠나야만 한다.</p>
          <div class="tagRow">
            <span class="tag">영토: 스톤폴</span>
          </div>
        </article>

        <article class="familyCard">
          <h2>실렌하임</h2>
          <p>혈맹과 귀속의 힘을 다룬다. 맹세는 영원한 생명과 젊음을 보장하지만, 자유를 거둔다.</p>
          <p>피의 맹약에 덧없이 묶인 이들은 오늘도 새로운 가족을 찾고 있다.</p>
          <div class="tagRow">
            <span class="tag">영토: 실렌하임 영지</span>
          </div>
        </article>
      </div>
    </div>


<!-- ✅ 3) 지역 -->
<div class="page" id="page-regions">
  <h1>지역</h1>
  <p class="lead">카드를 누르면 기록이 펼쳐진다. 뒤쪽에서 항목을 선택하면 상세가 확장된다.</p>

  <div class="regionGrid" id="regionGrid">

    <!-- 북부 -->
    <div class="regionFlip">
      <div class="regionCard" role="button" tabindex="0" data-region="north" aria-expanded="false" aria-label="북부 아르케인 산맥 기록 열기">
        <div class="regionInner">
          <div class="regionFace regionFront">
            <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
            <div class="regionThumb">
              <img src="assets/img/north.png" alt="아르케인 산맥" loading="lazy">
            </div>
            <h2>아르케인 산맥</h2>
            <p>대륙 최북단 만년설 산맥.</p>
          </div>

          <div class="regionFace regionBack">
            <div class="backWrap">
              <div class="backTop">
                <h3 class="backTitle">북부 기록</h3>
                <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
              </div>

              <div class="backSummary">
                <p>눈과 얼음이 영토를 지배한다. 고산 협곡과 설빙 균열은 외부인의 길을 끊는다.</p>
              </div>

              <div class="keywordRow" role="tablist" aria-label="북부 항목 선택">
                <button class="kwBtn" type="button" data-item="north-area" aria-expanded="false">아르케인 산맥</button>
                <button class="kwBtn" type="button" data-item="north-site" aria-expanded="false">벨세인</button>
              </div>

              <div class="accordion" aria-label="북부 상세">
                <div class="accPanel" id="north-area">
                  <h3>■ 아르케인 산맥</h3>
                  <p>대륙 최북단을 가로지르는 거대한 만년설 지대. 공식 명칭은 아르케인 산맥.</p>
                  <p>연중 대부분이 눈과 얼음으로 뒤덮여 있으며, 해빙기는 짧고 여름조차 냉기를 품는다.</p>
                  <p>깎아지른 고산 협곡과 깊은 설빙 균열이 이어져 있어 외부인의 접근은 극히 어렵다.</p>
                  <p>과거 이 산맥은 노르벨 가문의 영토였다. 예언과 속죄를 중시하던 가문은 세속과 거리를 두고 산맥 깊은 곳에서 은거하듯 살아왔다.</p>
                  <p>그러나 현재 산맥 대부분은 오스카르트 가문이 점령한 상태다. 군사적 요충지로서의 가치를 노린 침공이었다고 전해진다.</p>
                  <p>눈의 일족은 적극적으로 저항하지 않았다. 그들의 선택이었는지, 의도된 반응이었는지는 밝혀지지 않았다.</p>
                </div>

                <div class="accPanel" id="north-site">
                  <h3>■ 백안의 전당 벨세인</h3>
                  <p>노르벨의 가주는 대대로 벨세인에서 속죄의 의식을 치른 뒤 예언을 행했다.</p>
                  <p>미래를 묻기 위해 찾아오는 자들이 있었으나, 예언의 전말은 가주 외에는 누구에게도 전해지지 않는다.</p>
                  <p>현재 산맥의 대부분은 오스카르트의 지배 아래에 있다. 다만 침략 당시 노르벨의 장로 일곱 명이 희생하여 벨세인만은 보전되었다고 기록되어 있다.</p>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 남부 -->
    <div class="regionFlip">
      <div class="regionCard" role="button" tabindex="0" data-region="south" aria-expanded="false" aria-label="남부 레티아 기록 열기">
        <div class="regionInner">
          <div class="regionFace regionFront">
            <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
            <div class="regionThumb">
              <img src="assets/img/south.png" alt="레티아" loading="lazy">
            </div>
            <h2>레티아</h2>
            <p>카르니스 최대 항구이자 학술 도시</p>
          </div>

          <div class="regionFace regionBack">
            <div class="backWrap">
              <div class="backTop">
                <h3 class="backTitle">남부 기록</h3>
                <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
              </div>

              <div class="backSummary">
                <p>항구의 소음과 서고의 먼지가 공존한다. 바다를 통해 지식이 유입되고, 금서도 함께 들어온다.</p>
              </div>

              <div class="keywordRow" role="tablist" aria-label="남부 항목 선택">
                <button class="kwBtn" type="button" data-item="south-area" aria-expanded="false">레티아</button>
                <button class="kwBtn" type="button" data-item="south-site" aria-expanded="false">검은 탑</button>
              </div>

              <div class="accordion" aria-label="남부 상세">
                <div class="accPanel" id="south-area">
                  <h3>■ 레티아</h3>
                  <p>카르니스 최대 규모의 항구이자 학술 도시.</p>
                  <p>남부 해안에 위치하며, 대륙에서 가장 활발한 해상 교역이 이루어지는 곳이다. 정확한 건립 연대는 전해지지 않지만, 세르몬트 가문이 본거지로 삼은 이후 도시의 성격이 급격히 변했다.</p>
                  <p>세르몬트는 해상 교역을 장려했고, 카르니스 내부 세력뿐 아니라 바다 너머의 이민족들과도 적극적으로 교류하였다.</p>
                  <p>그 과정에서 외부의 문화, 기술, 언어, 학문이 유입되었고, 레티아는 단순한 항구 도시에서 지식의 중심지로 발전했다.</p>
                  <p>현재 레티아는 상인과 선원뿐 아니라 학자, 기록관, 연금술사, 기술자 등 다양한 탐구자들이 모이는 도시다. 대륙에서 가장 많은 외래 문헌과 이국 서적이 유통되는 곳이기도 하다.</p>
                </div>

                <div class="accPanel" id="south-site">
                  <h3>■ 검은 탑</h3>
                  <p>세르몬트 가문의 성 인근에는 ‘검은 탑’이라 불리는 거대한 석조 탑이 존재한다. 도시의 상징이자, 레티아가 학술 도시로 자리 잡게 된 핵심 시설이다.</p>
                  <p>검은 탑은 총 100층 구조로 이루어져 있으며, 내부에는 방대한 연구 서적, 학술지, 고문서, 각종 기록, 이민족 문헌, 금서 등이 보관되어 있다. 대륙에서 가장 큰 지식 보관 시설로 알려져 있다.</p>
                  <p>탑은 상층부로 갈수록 보안이 강화되며, 일부 층은 외부에 존재 자체가 공개되지 않는다. 최상층에서 어떤 연구가 이루어지는지는 기밀로 취급된다.</p>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 동부 -->
    <div class="regionFlip">
      <div class="regionCard" role="button" tabindex="0" data-region="east" aria-expanded="false" aria-label="동부 기록 열기">
        <div class="regionInner">
          <div class="regionFace regionFront">
            <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
            <div class="regionThumb">
              <img src="assets/img/east.png" alt="매바람 황야와 스톤폴" loading="lazy">
            </div>
            <h2>매바람 황야 · 스톤폴</h2>
            <p>메마른 황야와 협곡 고개 요새</p>
          </div>

          <div class="regionFace regionBack">
            <div class="backWrap">
              <div class="backTop">
                <h3 class="backTitle">동부 기록</h3>
                <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
              </div>

              <div class="backSummary">
                <p>낮의 열기와 밤의 냉기가 번갈아 목을 조른다. 바람은 길을 지우고, 요새는 길을 소유한다.</p>
              </div>

              <div class="keywordRow" role="tablist" aria-label="동부 항목 선택">
                <button class="kwBtn" type="button" data-item="east-area" aria-expanded="false">매바람 황야</button>
                <button class="kwBtn" type="button" data-item="east-site" aria-expanded="false">스톤폴</button>
              </div>

              <div class="accordion" aria-label="동부 상세">
                <div class="accPanel" id="east-area">
                  <h3>■ 매바람 황야</h3>
                  <p>대륙 동부에 펼쳐진 광활한 모래사막 지대. 공식 명칭은 매바람 황야라 불린다.</p>
                  <p>이 지역은 기후가 극단적이다. 낮에는 살을 태울 듯한 열기가 지속되고, 밤이 되면 급격히 기온이 떨어진다.</p>
                  <p>강한 모래바람이 자주 불어 시야를 가리며, 지형은 끊임없이 변한다.</p>
                  <p>황야에는 몬스터가 밀집해 있다. 특히 사막형 포식종과 변이 생물이 다수 서식하며, 이동 상단과 여행자들이 자주 습격을 당한다.</p>
                  <p>농경이나 정착엔 불리하지만 전략적 가치는 높다. 황야를 가로지르는 유일한 고개를 통제하는 자가 동부 교역로 전체를 장악하게 되기 때문이다.</p>
                </div>

                <div class="accPanel" id="east-site">
                  <h3>■ 고개 요새 스톤폴</h3>
                  <p>매바람 황야 중앙의 협곡 고개에 세워진 대형 석조 요새. 이곳을 스톤폴이라 부른다.</p>
                  <p>가파른 절벽 사이에 자리 잡은 천연 요충지로, 동서 교역로의 관문 역할을 한다.</p>
                  <p>현재 스톤폴은 오스카르트 가문의 지배 아래에 있다. 가문은 이곳에서 10년마다 ‘전투연’을 열어 가장 강한 자를 왕으로 추대해왔다.</p>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 서부 -->
    <div class="regionFlip">
      <div class="regionCard" role="button" tabindex="0" data-region="west" aria-expanded="false" aria-label="서부 실렌하임 영지 기록 열기">
        <div class="regionInner">
          <div class="regionFace regionFront">
            <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
            <div class="regionThumb">
              <img src="assets/img/west.png" alt="실렌하임 영지" loading="lazy">
            </div>
            <h2>실렌하임 영지</h2>
            <p>빛이 들지 않는 혈맹의 땅</p>
          </div>

          <div class="regionFace regionBack">
            <div class="backWrap">
              <div class="backTop">
                <h3 class="backTitle">서부 기록</h3>
                <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
              </div>

              <div class="backSummary">
                <p>안개가 숲을 봉인하고, 거래가 인간을 봉인한다. 이름이 지워진 거래는 피로 남는다.</p>
              </div>

              <div class="keywordRow" role="tablist" aria-label="서부 항목 선택">
                <button class="kwBtn" type="button" data-item="west-area" aria-expanded="false">실렌하임 영지</button>
                <button class="kwBtn" type="button" data-item="west-site" aria-expanded="false">암시장</button>
              </div>

              <div class="accordion" aria-label="서부 상세">
                <div class="accPanel" id="west-area">
                  <h3>■ 실렌하임 영지</h3>
                  <p>대륙 서쪽 끝, 해가 길게 머무르지 않는 땅. 이곳을 실렌하임 영지라 부른다.</p>
                  <p>연중 짙은 안개가 숲을 뒤덮고 있으며, 일조량이 부족해 농경은 제한적이다. 대신 음습한 숲과 습지가 광범위하게 형성되어 있다.</p>
                  <p>영지는 하나의 중심 도시가 아닌, 점처럼 흩어진 거점들로 이루어져 있다. 각 거점은 독립적으로 보이지만, 영주인 '첫 아비' 라자르 실렌하임의 혈연으로 이루어져 있으며, 이를 ‘혈맹 거점’이라 부른다.</p>
                </div>

                <div class="accPanel" id="west-site">
                  <h3>■ 암시장</h3>
                  <p>실렌하임 영지는 대륙 최대 규모의 암시장이 형성된 지역으로 알려져 있다. 밀수품과 금지된 의식 도구, 신원 세탁과 인신 매매까지, 공식 기록에 남지 않는 거래가 주로 이루어진다.</p>
                  <p>일부 주술적 거래에는 실렌하임 혈맹의 권능이 개입된다. 이때 체결되는 것이 이른바 ‘피 계약’이다.</p>
                  <p>겉으로는 단순한 맹약처럼 보이지만, 계약이 성립되는 순간 당사자는 혈맹의 질서에 묶인다. 그 과정에서 속임수에 휘말려 실렌하임 일족으로 편입되는 자도 적지 않다.</p>
                  <p>한번 피로 맺어진 계약은 쉽게 끊어지지 않는다. 영지를 벗어난 뒤에도 그 효력이 사라지지 않는다고 전해진다.</p>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 중앙 -->
    <div class="regionFlip">
      <div class="regionCard" role="button" tabindex="0" data-region="central" aria-expanded="false" aria-label="중앙 에스테라 기록 열기">
        <div class="regionInner">
          <div class="regionFace regionFront">
            <div class="hintBadge"><span class="hintDot"></span>CLICK TO OPEN</div>
            <div class="regionThumb">
              <img src="assets/img/central.png" alt="에스테라" loading="lazy">
            </div>
            <h2>에스테라</h2>
            <p>사치와 향락의 도시</p>
          </div>

          <div class="regionFace regionBack">
            <div class="backWrap">
              <div class="backTop">
                <h3 class="backTitle">중앙 기록</h3>
                <button class="backBtn" type="button" data-action="flipBack" aria-label="뒤로 돌아가기">← 돌아가기</button>
              </div>

              <div class="backSummary">
                <p>원형의 도시는 결계로 묶였고, 쾌락은 가격표로 묶였다. 돌에 새겨진 이름은 도시의 비밀을 지킨다.</p>
              </div>

              <div class="keywordRow" role="tablist" aria-label="중앙 항목 선택">
                <button class="kwBtn" type="button" data-item="central-area" aria-expanded="false">에스테라</button>
                <button class="kwBtn" type="button" data-item="central-site" aria-expanded="false">결계석</button>
              </div>

              <div class="accordion" aria-label="중앙 상세">
                <div class="accPanel" id="central-area">
                  <h3>■ 에스테라</h3>
                  <p>사치와 향락의 도시. 지상낙원이라 불린다.</p>
                  <p>카르니스 대륙 중앙에 자리 잡은 원형 도시로, 결계석으로 이루어진 세 겹의 원형 경계로 나뉘어 있다.</p>
                  <p>에스테라는 오래전부터 상업과 쾌락 산업으로 번영해왔다. 대륙 각지의 상인, 귀족, 추방자, 모험가들이 이곳을 찾는다.</p>
                  <p>제 2환에는 고급 연회장과 향락관, 도박장, 사교 클럽이 밀집해 있다. 매춘은 공공연히 이루어지며, 해당 구역에서는 합법적인 사업으로 인정된다.</p>
                  <p>에스테라에서 쾌락은 죄가 아니다. 단, 값이 매겨질 뿐.</p>
                  <p>최근에는 출처가 불분명한 신종 향정 물질이 유통되고 있다. ‘별가루’, ‘백몽’, ‘낙원의 숨결’ 등 다양한 이름으로 불리며, 복용 시 극도의 황홀감과 감각 왜곡을 유발한다고 알려져 있다.</p>
                  <p>이 물질의 최초 유통 경로는 밝혀지지 않았으나, 현재 에스테라가 주요 집산지로 지목되고 있다. 발데인 가문은 이를 공식적으로 부인하고 있다.</p>
                </div>

                <div class="accPanel" id="central-site">
                  <h3>■ 결계석</h3>
                  <p>각 경계에는 일정 간격으로 묘비 형태의 돌이 박혀 있다. 이를 ‘결계석’이라 부른다.</p>
                  <p>투박하게 다듬은 검은 돌을 땅에 깊이 꽂아 세운 구조이며, 표면에는 작은 문양과 이름이 새겨져 있다.</p>
                  <p>겉보기에는 오래된 묘비와 다를 바 없다.</p>
                  <p>결계석은 에스테라를 보호하는 결계를 유지하는 장치로 알려져 있다. 외부의 침입, 대규모 재난, 마력 교란을 차단하는 기능을 가진다고 전해진다.</p>
                  <p>돌의 내부 구조와 작동 원리에 대해서는 발데인 가문 외에는 정확히 아는 자가 없다.</p>
                  <p>일부 학자는 결계석이 단순한 마력 축적 장치가 아니라 ‘지속적인 동력’을 필요로 하는 구조라고 주장한다. 그러나 이에 대한 공식 기록은 존재하지 않는다.</p>
                  <p>비석 한쪽에 새겨진 이름이 무엇을 의미하는지에 대해서도 도시는 명확한 답을 내놓지 않는다.</p>
                  <p>발데인 가문은 이를 '도시를 위한 헌신자들의 기록'이라 설명할 뿐이다.</p>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

     
    <!-- ✅ 4) 전체 지도 (자리만) -->
    <div class="page" id="page-map">
      <h1>전체 지도</h1>
      <p class="lead">지도 이미지 추가 예정.</p>
    </div>

  </section>
</div>

<!-- 🎵 BGM -->
<audio id="bgm" autoplay loop muted>
  <source src="bgm.mp3" type="audio/mpeg">
</audio>

<div id="audioControl">
  <button id="bgmToggle" aria-label="BGM Toggle">
    <svg id="playIcon" viewBox="0 0 24 24">
      <polygon points="8,5 19,12 8,19"></polygon>
    </svg>
    <svg id="pauseIcon" viewBox="0 0 24 24" style="display:none;">
      <rect x="6" y="5" width="4" height="14"></rect>
      <rect x="14" y="5" width="4" height="14"></rect>
    </svg>
  </button>
  <input type="range" id="volumeSlider" min="0" max="100" value="50">
</div>

<style>
#audioControl{
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10;

  display: flex;
  align-items: center;
  gap: 14px;
}

#volumeSlider{
  width: 120px;
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
}

#volumeSlider::-webkit-slider-runnable-track{
  height: 2px;
  background: rgba(255,255,255,0.4);
  border-radius: 2px;
}

#volumeSlider::-moz-range-track{
  height: 2px;
  background: rgba(255,255,255,0.4);
  border-radius: 2px;
}

#volumeSlider::-webkit-slider-thumb{
  -webkit-appearance: none;
  width: 10px;
  height: 10px;
  background: white;
  border-radius: 50%;
  margin-top: -4px;
  transition: transform 0.2s ease;
}

#volumeSlider::-moz-range-thumb{
  width: 10px;
  height: 10px;
  background: white;
  border-radius: 50%;
  border: none;
  transition: transform 0.2s ease;
}

#volumeSlider:hover::-webkit-slider-thumb{ transform: scale(1.2); }
#volumeSlider:hover::-moz-range-thumb{ transform: scale(1.2); }

#bgmToggle{
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
}

#bgmToggle svg{
  width: 22px;
  height: 22px;
  fill: white;
  opacity: 0.6;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

#bgmToggle:hover svg{
  opacity: 1;
  transform: scale(1.1);
}
</style>

<script>
const intro = document.getElementById("intro");
const mainContent = document.getElementById("mainContent");
const pressBtn = document.getElementById("pressBtn");

const bgm = document.getElementById("bgm");
const volumeSlider = document.getElementById("volumeSlider");
const bgmToggle = document.getElementById("bgmToggle");

const playIcon = document.getElementById("playIcon");
const pauseIcon = document.getElementById("pauseIcon");

const topNav = document.getElementById("topNav");
const navLinks = topNav.querySelectorAll("a[data-page]");

let started = false;
let fadeTimer = null;

/* 페이지(섹션) 전환 */
function showPage(key){
  const pages = document.querySelectorAll(".page");
  pages.forEach(p => p.classList.remove("active"));

  const target = document.getElementById("page-" + key);
  if (target) target.classList.add("active");

  navLinks.forEach(a => a.classList.toggle("active", a.dataset.page === key));
  window.scrollTo({ top: 0, behavior: "smooth" });
}

/* 오디오 */
function getTargetVolume(){
  return volumeSlider.value / 100;
}

function updateBgmButton(){
  if(bgm.paused){
    playIcon.style.display = "block";
    pauseIcon.style.display = "none";
  } else {
    playIcon.style.display = "none";
    pauseIcon.style.display = "block";
  }
}

function fadeTo(target, duration = 600, onDone){
  if (fadeTimer) clearInterval(fadeTimer);

  const startVol = bgm.volume;
  const diff = target - startVol;
  const steps = Math.max(1, Math.floor(duration / 30));
  let currentStep = 0;

  fadeTimer = setInterval(()=>{
    currentStep++;
    const progress = currentStep / steps;
    bgm.volume = startVol + diff * progress;

    if (currentStep >= steps){
      clearInterval(fadeTimer);
      fadeTimer = null;
      bgm.volume = target;
      if (onDone) onDone();
    }
  }, 30);
}

/* 시작 */
function startStory(){
  if(started) return;
  started = true;

  intro.classList.add("fadeOut");

  bgm.muted = false;
  bgm.volume = 0;

  bgm.play().then(()=>{
    fadeTo(getTargetVolume(), 800);
    updateBgmButton();
  }).catch(()=>{});

  setTimeout(()=>{
    intro.style.display="none";
    mainContent.style.display="block";
    mainContent.classList.add("show");
    topNav.classList.add("show");
  },500);
}

/* Enter (인트로 시작) */
document.addEventListener("keydown", e=>{
  if(e.key==="Enter" && !started) startStory();
});

/* 클릭 */
if(pressBtn) pressBtn.addEventListener("click", startStory);
if(intro) intro.addEventListener("click", startStory);

/* 메뉴 클릭 */
navLinks.forEach(a=>{
  a.addEventListener("click", (e)=>{
    e.preventDefault();
    const key = a.dataset.page;
    if (!started){
      startStory();
      setTimeout(()=> showPage(key), 600);
      return;
    }
    showPage(key);
  });
});

/* 볼륨 */
volumeSlider.addEventListener("input", ()=>{
  if(!bgm.paused){
    fadeTo(getTargetVolume(), 200);
  }
});

/* 토글 */
bgmToggle.addEventListener("click", ()=>{
  if(!started){
    startStory();
    return;
  }

  if(bgm.paused){
    bgm.volume = 0;
    bgm.play().then(()=>{
      fadeTo(getTargetVolume(), 500);
      updateBgmButton();
    });
  } else {
    fadeTo(0, 400, ()=>{
      bgm.pause();
      updateBgmButton();
    });
  }
});

/* =========================
   ✅ 지역: 플립 + 아코디언
   ========================= */
const regionGrid = document.getElementById("regionGrid");

function closeAllFlips(exceptCard = null){
  const cards = regionGrid ? regionGrid.querySelectorAll(".regionCard") : [];
  cards.forEach(card=>{
    if(exceptCard && card === exceptCard) return;
    card.classList.remove("is-flipped");
    card.setAttribute("aria-expanded","false");
    resetAccordion(card);
  });
}

function resetAccordion(card){
  const kwBtns = card.querySelectorAll(".kwBtn");
  const panels = card.querySelectorAll(".accPanel");
  kwBtns.forEach(b=> b.setAttribute("aria-expanded","false"));
  panels.forEach(p=> p.classList.remove("active"));
}

function flipCard(card){
  const isOn = card.classList.contains("is-flipped");
  if(isOn){
    card.classList.remove("is-flipped");
    card.setAttribute("aria-expanded","false");
    resetAccordion(card);
  } else {
    closeAllFlips(card);
    card.classList.add("is-flipped");
    card.setAttribute("aria-expanded","true");
  }
}

function toggleAccordion(card, targetId){
  const kwBtns = card.querySelectorAll(".kwBtn");
  const panels = card.querySelectorAll(".accPanel");
  const targetPanel = card.querySelector("#" + CSS.escape(targetId));
  if(!targetPanel) return;

  const isActive = targetPanel.classList.contains("active");

  kwBtns.forEach(b=> b.setAttribute("aria-expanded","false"));
  panels.forEach(p=> p.classList.remove("active"));

  if(!isActive){
    targetPanel.classList.add("active");
    const ownerBtn = card.querySelector(`.kwBtn[data-item="${CSS.escape(targetId)}"]`);
    if(ownerBtn) ownerBtn.setAttribute("aria-expanded","true");
  }
}

if(regionGrid){
  regionGrid.addEventListener("click", (e)=>{
    const backBtn = e.target.closest('button[data-action="flipBack"]');
    if(backBtn){
      e.stopPropagation();
      const card = e.target.closest(".regionCard");
      if(card) flipCard(card);
      return;
    }

    const kw = e.target.closest(".kwBtn");
    if(kw){
      e.stopPropagation();
      const card = e.target.closest(".regionCard");
      if(!card) return;
      toggleAccordion(card, kw.dataset.item);
      return;
    }

    const card = e.target.closest(".regionCard");
    if(card){
      flipCard(card);
    }
  });

  regionGrid.addEventListener("keydown", (e)=>{
    const card = e.target.closest(".regionCard");
    if(!card) return;

    if(e.key === "Escape"){
      e.preventDefault();
      closeAllFlips(null);
      return;
    }

    const isInnerBtn = e.target.classList && (e.target.classList.contains("kwBtn") || e.target.classList.contains("backBtn"));
    if(!isInnerBtn && (e.key === "Enter" || e.key === " ")){
      e.preventDefault();
      flipCard(card);
    }
  });
}

document.addEventListener("keydown", (e)=>{
  if(e.key === "Escape"){
    closeAllFlips(null);
  }
});

updateBgmButton();
</script>

</body>
</html>
